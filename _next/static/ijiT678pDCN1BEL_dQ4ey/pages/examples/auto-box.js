(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{FHUF:function(e,t,n){"use strict";var r=n("mXGw"),o=n.n(r),i=n("sKTV"),a=o.a.createElement;t.a=function(e){return function(t){var n=t.box,r=n.x,o=n.y;return t.isHtml?a("span",{style:{position:"absolute",left:r,top:o}},a(e,t)):a("g",{transform:Object(i.d)(r,o)},a(e,t))}}},OoM2:function(e,t,n){"use strict";var r=Array.isArray,o=Object.keys,i=Object.prototype.hasOwnProperty;e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var a,s,c,u=r(t),l=r(n);if(u&&l){if((s=t.length)!=n.length)return!1;for(a=s;0!==a--;)if(!e(t[a],n[a]))return!1;return!0}if(u!=l)return!1;var d=t instanceof Date,p=n instanceof Date;if(d!=p)return!1;if(d&&p)return t.getTime()==n.getTime();var f=t instanceof RegExp,h=n instanceof RegExp;if(f!=h)return!1;if(f&&h)return t.toString()==n.toString();var m=o(t);if((s=m.length)!==o(n).length)return!1;for(a=s;0!==a--;)if(!i.call(n,m[a]))return!1;for(a=s;0!==a--;)if(!e(t[c=m[a]],n[c]))return!1;return!0}return t!==t&&n!==n}},SQNZ:function(e,t,n){"use strict";n.d(t,"b",function(){return r});var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(function(e){return"none"!==e}(e)?t:0)+.5};t.a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none",o=arguments.length>3?arguments[3]:void 0,i=r(n,o);return[e-i,t-i]}},fhar:function(e,t,n){"use strict";n.r(t);var r=n("z3IF"),o=n("2Fjn"),i=n("mXGw"),a=n.n(i),s=n("SAVP"),c=n("qImK"),u=n("FHUF"),l=n("H3Hr"),d=n("8foj"),p=n("hsuq"),f={rect:{userSelect:"none",padding:10,color:"#333",backgroundColor:"#FFD86E",border:"1px solid #EDBA39",overflow:"hidden",borderRadius:4,minWidth:30},text:{whiteSpace:"nowrap"}},h=a.a.createElement,m=Object(u.a)(function(e){var t=e.id;return h("div",{id:t,style:f.rect},t)}),y=Object(l.a)({autoBox:!0,extractBoxesFromNodes:!0,layout:!0,hiddenFirstRender:!0,node:{type:m}}),g=h(p.a,null),b=n("i1F0"),x=n("qXGn"),v=n.n(x),O=a.a.createElement,w=Object(u.a)(function(e){var t=e.id,n=e.title,r=Object(i.useState)(n),o=r[0],a=r[1],s=Object(i.useRef)(null),c=Object(b.b)().requestBox;return Object(i.useEffect)(function(){c({id:t,element:s.current})},[o,t,c]),O("div",{id:t,ref:s,style:f.rect},O(v.a,{html:o,onChange:function(e){a(e.target.value)},style:f.text}))}),j=Object(l.a)({autoBox:!0,normalizeConnections:!0,layout:!0,autoViewportSize:!0,hiddenFirstRender:!0,node:{type:w},connection:{type:d.a,strokeWidth:1}});n.d(t,"default",function(){return N});a.a.createElement;var _={},E="wrapper",R=Object(s.a)("h1",null,"Auto Box"),T=Object(s.a)("p",null,"Static example:"),C=Object(s.a)(c.a,{code:"import React from 'react';\nimport { graph, withPosition } from '@regraph/graph';\nimport { Line } from '@regraph/connections';\nimport { Triangle } from '@regraph/arrowheads';\nimport styles from './styles';\n\nconst Rect = withPosition(({ id }) => (\n  <div id={id} style={styles.rect}>\n    {id}\n  </div>\n));\n\nconst Graph = graph({\n  autoBox: true,\n  extractBoxesFromNodes: true,\n  layout: true,\n  hiddenFirstRender: true,\n  node: { type: Rect },\n});\n\nexport default () => (\n  <Graph\n    width={186}\n    height={220}\n    nodeLayer=\"html\"\n    nodes={[\n      { id: 'Source', x: 40, y: 40 },\n      { id: 'Destination', x: 40, y: 140 },\n    ]}\n    connections={[\n      {\n        id: 'connection',\n        type: Line,\n        strokeWidth: 1,\n        src: { id: 'Source', padding: 5 },\n        dst: { id: 'Destination', padding: 5, marker: <Triangle /> },\n      },\n    ]}\n  />\n);\n",output:Object(s.a)(function(){return h(y,{width:186,height:220,nodeLayer:"html",nodes:[{id:"Source",x:40,y:40},{id:"Destination",x:40,y:140}],connections:[{id:"connection",type:d.a,strokeWidth:1,src:{id:"Source",padding:5},dst:{id:"Destination",padding:5,marker:g}}]})},{mdxType:"Graph"}),path:"examples/auto-box/index.jsx",sourceOpen:!0,mdxType:"Example"}),S=Object(s.a)("p",null,"Dynamic example:"),D=Object(s.a)(c.a,{code:"import React, { useState, useRef, useEffect } from 'react';\nimport { graph, withPosition, useBoxContext } from '@regraph/graph';\nimport { Line } from '@regraph/connections';\nimport ContentEditable from 'react-contenteditable';\nimport styles from './styles';\n\nconst TextRect = withPosition(({ id, title }) => {\n  const [content, setContent] = useState(title);\n  const ref = useRef(null);\n  const { requestBox } = useBoxContext();\n\n  useEffect(() => {\n    requestBox({ id, element: ref.current });\n  }, [content, id, requestBox]);\n\n  return (\n    <div id={id} ref={ref} style={styles.rect}>\n      <ContentEditable\n        html={content}\n        onChange={event => {\n          setContent(event.target.value);\n        }}\n        style={styles.text}\n      />\n    </div>\n  );\n});\n\nconst Graph = graph({\n  autoBox: true,\n  normalizeConnections: true,\n  layout: true,\n  autoViewportSize: true,\n  hiddenFirstRender: true,\n  node: { type: TextRect },\n  connection: {\n    type: Line,\n    strokeWidth: 1,\n  },\n});\n\nexport default () => (\n  <Graph\n    nodeLayer=\"html\"\n    nodes={[\n      { id: 'editable1', title: `Click me. I'm editable.` },\n      { id: 'editable2', title: `Me too!` },\n    ]}\n    boxes={{\n      editable1: { x: 40, y: 40 },\n      editable2: { x: 40, y: 140 },\n    }}\n    connections={[\n      {\n        id: 'connection',\n        src: 'editable1',\n        dst: 'editable2',\n      },\n    ]}\n  />\n);\n",output:Object(s.a)(function(){return O(j,{nodeLayer:"html",nodes:[{id:"editable1",title:"Click me. I'm editable."},{id:"editable2",title:"Me too!"}],boxes:{editable1:{x:40,y:40},editable2:{x:40,y:140}},connections:[{id:"connection",src:"editable1",dst:"editable2"}]})},{mdxType:"GraphDynamic"}),path:"examples/auto-box/auto-box-dynamic.jsx",sourceOpen:!0,mdxType:"Example"});function N(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(s.a)(E,Object(r.a)({},_,n,{components:t,mdxType:"MDXLayout"}),R,T,C,S,D)}N.isMDXComponent=!0},hsuq:function(e,t,n){"use strict";var r=n("z3IF"),o=n("hDBU"),i=n("2Fjn"),a=n("mXGw"),s=n.n(a),c=n("PDtE"),u=n("SQNZ"),l=n("/F3D"),d=s.a.createElement,p=6,f=6,h=function(e){var t=e.id,n=e.width,s=void 0===n?p:n,h=e.height,m=void 0===h?f:h,y=e.stroke,g=void 0===y?"none":y,b=e.strokeWidth,x=e.rtl,v=e.className,O=Object(i.a)(e,["id","width","height","stroke","strokeWidth","rtl","className"]),w=Object(a.useMemo)(function(){var e=Object(u.a)(s,m,g,b),t=Object(o.a)(e,2);return function(e,t,n){var r=t/2;return[{x:0,y:-r},{x:n?-e:e,y:0},{x:0,y:r}]}(t[0],t[1],x).map(l.a)},[m,x,g,b,s]);return d("polygon",Object(r.a)({id:t,points:w,className:Object(c.a)("regraph-arrowhead","regraph-arrowhead-triangle",v),stroke:g},O))};h.getMarkerProps=function(e){var t=e.width,n=void 0===t?p:t,r=e.height,o=void 0===r?f:r;return{width:n,height:o,viewBox:{x:e.rtl?-n:0,y:-o/2,width:n,height:o},anchor:{x:0,y:0},trim:n}},t.a=h},qXGn:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=a(n("mXGw")),u=s(n("OoM2")),l=a(n("W0B4"));function d(e){return e&&e.replace(/&nbsp;|\u202F|\u00A0/g," ")}function p(e){var t=function e(t){if(t.nodeType===Node.TEXT_NODE)return t;for(var n=t.childNodes,r=n.length-1;r>=0;r--){var o=e(n[r]);if(null!==o)return o}return null}(e),n=document.activeElement===e;if(null!==t&&null!==t.nodeValue&&n){var r=window.getSelection();if(null!==r){var o=document.createRange();o.setStart(t,t.nodeValue.length),o.collapse(!0),r.removeAllRanges(),r.addRange(o)}e instanceof HTMLElement&&e.focus()}}var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastHtml=t.props.html,t.el="function"===typeof t.props.innerRef?{current:null}:c.createRef(),t.getEl=function(){return(t.props.innerRef&&"function"!==typeof t.props.innerRef?t.props.innerRef:t.el).current},t.emitChange=function(e){var n=t.getEl();if(n){var r=n.innerHTML;if(t.props.onChange&&r!==t.lastHtml){var o=Object.assign({},e,{target:{value:r}});t.props.onChange(o)}t.lastHtml=r}},t}return r(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.tagName,r=t.html,a=t.innerRef,s=i(t,["tagName","html","innerRef"]);return c.createElement(n||"div",o({},s,{ref:"function"===typeof a?function(t){a(t),e.el.current=t}:a||this.el,onInput:this.emitChange,onBlur:this.props.onBlur||this.emitChange,onKeyUp:this.props.onKeyUp||this.emitChange,onKeyDown:this.props.onKeyDown||this.emitChange,contentEditable:!this.props.disabled,dangerouslySetInnerHTML:{__html:r}}),this.props.children)},t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=this.getEl();return!n||(d(e.html)!==d(n.innerHTML)||(t.disabled!==e.disabled||t.tagName!==e.tagName||t.className!==e.className||t.innerRef!==e.innerRef||!u.default(t.style,e.style)))},t.prototype.componentDidUpdate=function(){var e=this.getEl();e&&(this.props.html!==e.innerHTML&&(e.innerHTML=this.lastHtml=this.props.html),p(e))},t.propTypes={html:l.string.isRequired,onChange:l.func,disabled:l.bool,tagName:l.string,className:l.string,style:l.object,innerRef:l.oneOfType([l.object,l.func])},t}(c.Component);t.default=f},wqxM:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/examples/auto-box",function(){return n("fhar")}])}},[["wqxM",1,0]]]);