(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"+9rI":function(t,e,n){"use strict";var s=n("/6KZ"),r=n("HD3J"),i=n("8Xl/"),a=n("s9UB");t.exports=function(t){s(s.S,t,{from:function(t){var e,n,s,o,c=arguments[1];return r(this),(e=void 0!==c)&&r(c),void 0==t?new this:(n=[],e?(s=0,o=i(c,arguments[2],2),a(t,!1,(function(t){n.push(o(t,s++))}))):a(t,!1,n.push,n),new this(n))}})}},"/YX7":function(t,e,n){var s=n("SfGT");t.exports=function(t,e){return new(s(t))(e)}},"0im5":function(t,e,n){n("iKhv"),n("WwSA"),n("k/kI"),n("0r2l"),n("zVA4"),n("7XYW"),n("n+1H"),t.exports=n("TaGV").Map},"0r2l":function(t,e,n){"use strict";var s=n("Yvct"),r=n("O/tV");t.exports=n("VX2v")("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=s.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return s.def(r(this,"Map"),0===t?0:t,e)}},s,!0)},"0tNF":function(t,e,n){"use strict";var s=n("s20r"),r=n.n(s);var i=n("8ET1"),a=n.n(i),o=n("7X5e"),c=n.n(o);function u(t){return function(t){if(r()(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(c()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return a()(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(e,"a",(function(){return u}))},"1Ldg":function(t,e,n){"use strict";e.a=function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}}},"2agv":function(t,e,n){"use strict";var s=n("8Xl/"),r=n("/6KZ"),i=n("dCrc"),a=n("oICS"),o=n("Ng5M"),c=n("gou2"),u=n("ErhN"),h=n("VJcA");r(r.S+r.F*!n("Clx3")((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,r,l,p=i(t),y="function"==typeof this?this:Array,f=arguments.length,x=f>1?arguments[1]:void 0,d=void 0!==x,m=0,b=h(p);if(d&&(x=s(x,f>2?arguments[2]:void 0,2)),void 0==b||y==Array&&o(b))for(n=new y(e=c(p.length));e>m;m++)u(n,m,d?x(p[m],m):p[m]);else for(l=b.call(p),n=new y;!(r=l.next()).done;m++)u(n,m,d?a(l,x,[r.value,m],!0):r.value);return n.length=m,n}})},"2sSj":function(t,e,n){"use strict";e.a=function(t,e){return t.x+=e.x,t.y+=e.y,t}},"2xrT":function(t,e,n){t.exports=n("md7T")},"31MD":function(t,e,n){var s=n("/6KZ"),r=n("SvME")(!0);s(s.S,"Object",{entries:function(t){return r(t)}})},"6JBb":function(t,e,n){var s=n("/6KZ"),r=n("SvME")(!1);s(s.S,"Object",{values:function(t){return r(t)}})},"6Ndq":function(t,e,n){t.exports=n("GyeN")},"6mFX":function(t,e,n){t.exports=n("0im5")},"7XYW":function(t,e,n){n("pFlO")("Map")},"8ET1":function(t,e,n){t.exports=n("Vlwe")},AXMb:function(t,e,n){n("31MD"),t.exports=n("TaGV").Object.entries},BGbK:function(t,e,n){var s=n("/1nD"),r=n("lyqB");t.exports=function(t){return function(){if(s(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},Clx3:function(t,e,n){var s=n("0Sp3")("iterator"),r=!1;try{var i=[7][s]();i.return=function(){r=!0},Array.from(i,(function(){throw 2}))}catch(a){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var i=[7],o=i[s]();o.next=function(){return{done:n=!0}},i[s]=function(){return o},t(i)}catch(a){}return n}},GyeN:function(t,e,n){n("XmXP");var s=n("TaGV").Object;t.exports=function(t,e){return s.create(t,e)}},H3Hr:function(t,e,n){"use strict";var s={};n.r(s),n.d(s,"typeName",(function(){return pe})),n.d(s,"length",(function(){return ye})),n.d(s,"zip",(function(){return fe})),n.d(s,"partition",(function(){return xe})),n.d(s,"reverse",(function(){return de})),n.d(s,"sort",(function(){return me})),n.d(s,"join",(function(){return be})),n.d(s,"keys",(function(){return ve})),n.d(s,"values",(function(){return we})),n.d(s,"pairs",(function(){return Ee})),n.d(s,"fromPairs",(function(){return Me})),n.d(s,"merge",(function(){return Pe}));var r=n("hHgk"),i=n.n(r),a=n("wuQJ"),o=n.n(a),c=n("UthY"),u=n.n(c),h=n("tvLF"),l=n.n(h),p=n("s4hn"),y=n.n(p),f=n("1qCV"),x=n.n(f),d=n("azxR"),m=n("mXGw"),b=n.n(m),g=n("obYp");function v(t,e){var n=x()(t);if(y.a){var s=y()(t);e&&(s=s.filter((function(e){return l()(t,e).enumerable}))),n.push.apply(n,s)}return n}var w=function(t){return function(e){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):u.a?o()(t,u()(n)):v(Object(n)).forEach((function(e){i()(t,e,l()(n,e))}))}return t}({},e,{},t(e))}};function E(t,e){var n=x()(t);if(y.a){var s=y()(t);e&&(s=s.filter((function(e){return l()(t,e).enumerable}))),n.push.apply(n,s)}return n}var M=function(t){return w((function(e){var n=e.nodes;return{nodes:Object(m.useMemo)((function(){return n.map((function(e){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):u.a?o()(t,u()(n)):E(Object(n)).forEach((function(e){i()(t,e,l()(n,e))}))}return t}({},t,{},e)}))}),[n])}}))},P=function(t){return"[object Object]"===Object.prototype.toString.call(t)};function A(t,e){var n=x()(t);if(y.a){var s=y()(t);e&&(s=s.filter((function(e){return l()(t,e).enumerable}))),n.push.apply(n,s)}return n}var O=function(t){var e=function(t){var e=t.src,n=t.dst;return{src:P(e)?e:{id:e},dst:P(n)?n:{id:n}}}(t),n=e.src,s=e.dst;return n!==t.src||s!==t.dst?function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):u.a?o()(t,u()(n)):A(Object(n)).forEach((function(e){i()(t,e,l()(n,e))}))}return t}({},t,{src:n,dst:s}):t},R=w((function(t){var e=t.connections;return{connections:Object(m.useMemo)((function(){return e.map(O)}),[e])}})),k=n("pL2a"),_=n.n(k),T=n("2xrT"),j=n.n(T),X=n("Sxkx"),I=function(t){return t&&Object(X.c)(t.x)&&Object(X.c)(t.y)&&Object(X.c)(t.width)&&Object(X.c)(t.height)};function N(t,e){var n=x()(t);if(y.a){var s=y()(t);e&&(s=s.filter((function(e){return l()(t,e).enumerable}))),n.push.apply(n,s)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):u.a?o()(t,u()(n)):N(Object(n)).forEach((function(e){i()(t,e,l()(n,e))}))}return t}x.a,j.a,_.a;var C=function(t,e){return Y({},t,{},e,{src:Y({},t.src,{},e.src),dst:Y({},t.dst,{},e.dst)})},S=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduceRight((function(t,e){return e(t)}),t)}},$=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}};function L(t,e){var n=x()(t);if(y.a){var s=y()(t);e&&(s=s.filter((function(e){return l()(t,e).enumerable}))),n.push.apply(n,s)}return n}var D=j.a,B=function(t){return t.replace(/\s/g,"")},z=function(t){return t.id||"(".concat(t.x,",").concat(t.y,")")},q=function(t,e){var n=B(function(t){var e=t.src,n=t.dst;return"".concat(z(e),"->").concat(z(n))}(t)),s=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):u.a?o()(t,u()(n)):L(Object(n)).forEach((function(e){i()(t,e,l()(n,e))}))}return t}({},t,{id:n});return(e[n]=e[n]||[]).push(s),s},U=function(t){return t.length>1},F=w((function(t){var e=t.connections;return{connections:Object(m.useMemo)((function(){var t={},n=e.map(function(t){return function(e){return e.id?e:q(e,t)}}(t));return function(t){D(t).filter(U).forEach((function(t){t.forEach((function(t,e){t.id="".concat(e+1,".").concat(t.id)}))}))}(t),n}),[e])}}));function G(t,e){var n=x()(t);if(y.a){var s=y()(t);e&&(s=s.filter((function(e){return l()(t,e).enumerable}))),n.push.apply(n,s)}return n}var V=function(t){return t.id||"(".concat(t.x,",").concat(t.y,")")},Z=function(t){return t.reduce((function(t,e){var n,s=[(n=e).src,n.dst].map(V).sort().join("<->");return(t[s]=t[s]||[]).push(e),t}),{})},Q=function(t){return t.length>1},H=function(t){return j()(t).filter(Q)},J=function(t){return function(e){return e.reduce((function(e,n){var s=function(t,e){var n=(t.length-1)*e;return n-n/2}(n,t),r=V(n[0].src),a=function(t){return V(t.src)!==r},c=function(e){return s-t*e};return n.forEach((function(t,n){e[t.id]=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):u.a?o()(t,u()(n)):G(Object(n)).forEach((function(e){i()(t,e,l()(n,e))}))}return t}({},t,{bend:a(t)?-c(n):c(n)})})),e}),{})}},K=function(t){return function(e){return t.map((function(t){return e[t.id]||t}))}};function W(t,e){var n=x()(t);if(y.a){var s=y()(t);e&&(s=s.filter((function(e){return l()(t,e).enumerable}))),n.push.apply(n,s)}return n}var tt=function(t){var e,n=t.box,s=t.x,r=t.y,i=t.width,a=t.height;return n||s&&r&&(e={x:s,y:r,width:i,height:a},x()(e).forEach((function(t){return null==e[t]&&delete e[t]})),e)},et=function(t,e){var n=tt(e);return n&&(t[e.id]=n),t},nt=w((function(t){var e=t.nodes,n=t.boxes,s=Object(m.useMemo)((function(){return function(t){return t.reduce(et,{})}(e)}),[e]);return{boxes:Object(m.useMemo)((function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):u.a?o()(t,u()(n)):W(Object(n)).forEach((function(e){i()(t,e,l()(n,e))}))}return t}({},s,{},n)}),[s,n])}}));function st(t,e){var n=x()(t);if(y.a){var s=y()(t);e&&(s=s.filter((function(e){return l()(t,e).enumerable}))),n.push.apply(n,s)}return n}function rt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?st(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):u.a?o()(t,u()(n)):st(Object(n)).forEach((function(e){i()(t,e,l()(n,e))}))}return t}var it=w((function(t){var e=t.style,n=Object(m.useState)(!0),s=n[0],r=n[1];return Object(m.useEffect)((function(){r(!1)}),[]),{style:s?rt({},e,{opacity:0}):e}})),at=n("i1F0"),ot=x.a,ct=n("0tNF"),ut=function(t){return t.y},ht=function(t){return t.x+t.width},lt=function(t){return t.y+t.height},pt=function(t){return t.x},yt=function(t){return function(e){return t.apply(void 0,Object(ct.a)(e))}},ft=yt(Math.min),xt=yt(Math.max);function dt(t,e){var n=x()(t);if(y.a){var s=y()(t);e&&(s=s.filter((function(e){return l()(t,e).enumerable}))),n.push.apply(n,s)}return n}var mt=j.a,bt={x:0,y:0,width:0,height:0},gt=function(t){return I(t)?t:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):u.a?o()(t,u()(n)):dt(Object(n)).forEach((function(e){i()(t,e,l()(n,e))}))}return t}({},bt,{},t)},vt=function(t){var e,n=mt(t).map(gt);return void 0===(e=n)||null===e||(e.length?0===e.length:"object"===typeof e&&0===ot(e).length)?{width:0,height:0}:function(t){return e=ft(t.map(ut)),n=xt(t.map(ht)),s=xt(t.map(lt)),{x:r=ft(t.map(pt)),y:e,width:n-r,height:s-e};var e,n,s,r}(n)},wt=function(t,e){return Object(m.useMemo)((function(){var n=[ht(t),lt(t)],s=n[0],r=n[1],i=function(t,e){return"function"===typeof e?e(t):P(e)?e:{right:t.x,bottom:t.y}}(t,e);return{width:s+i.right,height:r+i.bottom}}),[t,e])},Et=n("z3IF"),Mt=n("2Fjn");function Pt(t,e){var n=x()(t);if(y.a){var s=y()(t);e&&(s=s.filter((function(e){return l()(t,e).enumerable}))),n.push.apply(n,s)}return n}function At(t,e){var n=x()(t);if(y.a){var s=y()(t);e&&(s=s.filter((function(e){return l()(t,e).enumerable}))),n.push.apply(n,s)}return n}var Ot=function(t){t.preventDefault()},Rt=function(t){var e=[],n=null,s=function(){for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];e=r,n||(n=requestAnimationFrame((function(){n=null,t.apply(void 0,e)})))};return s.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},s};function kt(t,e){var n=x()(t);if(y.a){var s=y()(t);e&&(s=s.filter((function(e){return l()(t,e).enumerable}))),n.push.apply(n,s)}return n}function _t(t,e){var n=x()(t);if(y.a){var s=y()(t);e&&(s=s.filter((function(e){return l()(t,e).enumerable}))),n.push.apply(n,s)}return n}function Tt(t,e){var n=x()(t);if(y.a){var s=y()(t);e&&(s=s.filter((function(e){return l()(t,e).enumerable}))),n.push.apply(n,s)}return n}var jt=n("xARA"),Xt=n.n(jt);function It(t,e){"function"===typeof t?t(e):t&&(t.current=e)}function Nt(t,e){return b.a.useMemo((function(){return null==t&&null==e?null:function(n){It(t,n),It(e,n)}}),[t,e])}var Yt=b.a.useLayoutEffect;function Ct(t){var e=b.a.useRef(t);return Yt((function(){e.current=t})),b.a.useCallback((function(t){return(0,e.current)(t)}),[])}var St=function(t){return t&&t.ownerDocument||document},$t=function(t){return t.substring(2).toLowerCase()},Lt=function(t){var e=t.mouseEvent,n=void 0===e?"onClick":e,s=t.touchEvent,r=void 0===s?"onTouchEnd":s,i=t.onMouseAway,a=t.ref,o=function(){var t=b.a.useRef(!1);return b.a.useEffect((function(){return t.current=!0,function(){t.current=!1}}),[]),t}(),c=b.a.useRef(!1),u=b.a.useRef(null),h=Nt(u,a),l=b.a.useCallback((function(t){It(h,Xt.a.findDOMNode(t))}),[h]),p=Ct((function(t){if(!t.defaultPrevented&&o.current)if(c.current)c.current=!1;else{var e=u.current;if(e){var n=St(e);n.documentElement&&n.documentElement.contains(t.target)&&!e.contains(t.target)&&i(t)}}})),y=b.a.useCallback((function(){c.current=!0}),[]);return b.a.useEffect((function(){if(!1!==r){var t=$t(r),e=St(u.current);return e.addEventListener(t,p),e.addEventListener("touchmove",y),function(){e.removeEventListener(t,p),e.removeEventListener("touchmove",y)}}}),[p,y,r]),b.a.useEffect((function(){if(!1!==n){var t=$t(n),e=St(u.current);return e.addEventListener(t,p),function(){e.removeEventListener(t,p)}}}),[p,n]),l};function Dt(t,e){var n=x()(t);if(y.a){var s=y()(t);e&&(s=s.filter((function(e){return l()(t,e).enumerable}))),n.push.apply(n,s)}return n}var Bt=function(){},zt=S((function(t){var e=t.onMouseDown,n=t.onMouseUp,s=Object(Mt.a)(t,["onMouseDown","onMouseUp"]),r=!1;return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):u.a?o()(t,u()(n)):Pt(Object(n)).forEach((function(e){i()(t,e,l()(n,e))}))}return t}({onMouseDown:function(t){r=!0,e(t)},onMouseUp:function(t){r&&(r=!1,n(t))}},s)}),(function(t){var e,n,s=t.onMouseDown,r=t.onMouseMove,a=t.onMouseUp,c=Object(Mt.a)(t,["onMouseDown","onMouseMove","onMouseUp"]),h=function(t){return t.preventDefault(),n=function(t){for(var n=0;n<t.changedTouches.length;n+=1)if(t.changedTouches[n].identifier===e)return t.changedTouches[n]}(t),t.clientX=n.clientX,t.clientY=n.clientY,t.target=document.elementFromPoint(t.clientX,t.clientY),t};return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?At(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):u.a?o()(t,u()(n)):At(Object(n)).forEach((function(e){i()(t,e,l()(n,e))}))}return t}({onMouseDown:s,onMouseMove:r,onMouseUp:a,onTouchStart:function(t){document.addEventListener("touchmove",Ot,{passive:!1}),e=t.changedTouches[0].identifier,s(h(t))},onTouchMove:function(t){r(h(t))},onTouchEnd:function(t){document.removeEventListener("touchmove",Ot),a(h(t))}},c)}),(function(t){var e=t.onMouseMove,n=Object(Mt.a)(t,["onMouseMove"]),s=Rt(e);return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):u.a?o()(t,u()(n)):kt(Object(n)).forEach((function(e){i()(t,e,l()(n,e))}))}return t}({onMouseMove:function(t){t.persist(),s(t)}},n)}),(function(t){var e,n,s=t.onMouseMove,r=t.onMouseDown,a=Object(Mt.a)(t,["onMouseMove","onMouseDown"]),c=function(t){e=t.clientX,n=t.clientY};return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):u.a?o()(t,u()(n)):_t(Object(n)).forEach((function(e){i()(t,e,l()(n,e))}))}return t}({onMouseEnter:function(t){c(t)},onMouseDown:function(t){c(t),r(t)},onMouseMove:function(t){!function(t){t.deltaX=t.clientX-e,t.deltaY=t.clientY-n,t.getDelta=function(){return{x:t.deltaX,y:t.deltaY}}}(t),c(t),s(t)}},a)}),(function(t){var e,n=t.ref,s=t.onMouseDown,r=t.onMouseMove,a=t.onMouseUp,c=Object(Mt.a)(t,["ref","onMouseDown","onMouseMove","onMouseUp"]),h=function(t){e=e||n.current.getBoundingClientRect(),t.containerX=t.clientX-e.x,t.containerY=t.clientY-e.y,t.getPosition=function(){return{x:t.containerX,y:t.containerY}}};return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):u.a?o()(t,u()(n)):Tt(Object(n)).forEach((function(e){i()(t,e,l()(n,e))}))}return t}({ref:n,onMouseDown:function(t){h(t),s(t)},onMouseMove:function(t){h(t),r(t)},onMouseUp:function(t){h(t),a(t)}},c)})),qt=function(t){var e=t.eventMapper,n=void 0===e?function(t){return t}:e,s=t.ref,r=t.onMouseDown,a=void 0===r?Bt:r,c=t.onMouseMove,h=void 0===c?Bt:c,p=t.onMouseUp,y=void 0===p?Bt:p,f=t.props,x=Ct((function(t){return a(n(t,f))})),b=Ct((function(t){return h(n(t,f))})),g=Ct((function(t){return y(n(t,f))})),v=Object(m.useMemo)((function(){return zt({ref:s,onMouseDown:x,onMouseMove:b,onMouseUp:g})}),[s,x,b,g]);return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):u.a?o()(t,u()(n)):Dt(Object(n)).forEach((function(e){i()(t,e,l()(n,e))}))}return t}({},v,{ref:Lt({mouseEvent:"onMouseUp",onMouseAway:v.onMouseUp,ref:s})})},Ut=b.a.createElement,Ft=n("6mFX"),Gt=n.n(Ft),Vt=function(t,e){var n=t.id,s=(t.element||document.getElementById(n)).getBoundingClientRect(),r=s.x,i=s.y,a=s.width,o=s.height;return{x:r-e.x,y:i-e.y,width:a,height:o}},Zt=n("6Ndq"),Qt=n.n(Zt);function Ht(t,e){var n=x()(t);if(y.a){var s=y()(t);e&&(s=s.filter((function(e){return l()(t,e).enumerable}))),n.push.apply(n,s)}return n}var Jt=function(t,e,n){var s=Object(m.useReducer)((function(){return Qt()(null)}))[1],r=Object(m.useState)(t),a=r[0],c=r[1],h=e||c,p=e?t:a;Object(m.useRef)(t).current;var y=Object(m.useRef)(new Gt.a).current,f=Object(m.useRef)({requestBox:function(t){var e=t.port,n=Object(Mt.a)(t,["port"]);if(y.set(n.id,n),e){var r="".concat(t.id,"/").concat(e);y.set(r,t)}s()}}).current;return Object(m.useEffect)((function(){if(y.size){var t=n.current.getBoundingClientRect(),e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ht(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):u.a?o()(t,u()(n)):Ht(Object(n)).forEach((function(e){i()(t,e,l()(n,e))}))}return t}({},p);y.forEach((function(n){var s=n.id,r=n.port;if(r){var i="".concat(s,"/").concat(r),a=e[s],o=Vt({id:i},t);o.x-=a.x,o.y-=a.y,o.parent=s,e[i]=o}else e[s]=Vt(n,t)})),y.clear(),h(e)}})),{boxes:p,boxContext:f}},Kt=b.a.createElement,Wt=function(t){return Object(m.forwardRef)((function(e,n){var s=e.boxes,r=e.onBoxes,i=Object(Mt.a)(e,["boxes","onBoxes"]),a=Object(m.useRef)(null),o=Nt(a,n),c=Jt(s,r,a),u=c.boxes,h=c.boxContext;return Kt(at.a.Provider,{value:h},Kt(t,Object(Et.a)({ref:o},i,{boxes:u})))}))},te=n("g2Zv"),ee=n("2sSj"),ne=n("1Ldg"),se=n("RG6p");var re=class{constructor(t=0,e=0){this.x=t,this.y=e}clone(){return new this.constructor(this.x,this.y)}add(t){return new this.constructor(this.x+t.x,this.y+t.y)}subtract(t){return new this.constructor(this.x-t.x,this.y-t.y)}multiply(t){return new this.constructor(this.x*t,this.y*t)}divide(t){return new this.constructor(this.x/t,this.y/t)}equals(t){return this.x===t.x&&this.y===t.y}precisionEquals(t,e){return Math.abs(this.x-t.x)<e&&Math.abs(this.y-t.y)<e}lerp(t,e){const n=1-e;return new this.constructor(this.x*n+t.x*e,this.y*n+t.y*e)}distanceFrom(t){const e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}min(t){return new this.constructor(Math.min(this.x,t.x),Math.min(this.y,t.y))}max(t){return new this.constructor(Math.max(this.x,t.x),Math.max(this.y,t.y))}transform(t){return new this.constructor(t.a*this.x+t.c*this.y+t.e,t.b*this.x+t.d*this.y+t.f)}toString(){return`point(${this.x},${this.y})`}};class ie{constructor(t=0,e=0){this.x=t,this.y=e}static fromPoints(t,e){return new ie(e.x-t.x,e.y-t.y)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}magnitude(){return this.x*this.x+this.y*this.y}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}determinant(t){return this.x*t.y-this.y*t.x}unit(){return this.divide(this.length())}add(t){return new this.constructor(this.x+t.x,this.y+t.y)}subtract(t){return new this.constructor(this.x-t.x,this.y-t.y)}multiply(t){return new this.constructor(this.x*t,this.y*t)}divide(t){return new this.constructor(this.x/t,this.y/t)}angleBetween(t){let e=this.dot(t)/(this.length()*t.length());e=Math.max(-1,Math.min(e,1));const n=Math.acos(e);return this.cross(t)<0?-n:n}perp(){return new this.constructor(-this.y,this.x)}perpendicular(t){return this.subtract(this.project(t))}project(t){const e=this.dot(t)/t.dot(t);return t.multiply(e)}transform(t){return new this.constructor(t.a*this.x+t.c*this.y,t.b*this.x+t.d*this.y)}equals(t){return this.x===t.x&&this.y===t.y}precisionEquals(t,e){return Math.abs(this.x-t.x)<e&&Math.abs(this.y-t.y)<e}toString(){return`vector(${this.x},${this.y})`}}var ae=ie;class oe{constructor(t=1,e=0,n=0,s=1,r=0,i=0){this.a=t,this.b=e,this.c=n,this.d=s,this.e=r,this.f=i}static translation(t,e){return new oe(1,0,0,1,t,e)}static scaling(t){return new oe(t,0,0,t,0,0)}static scalingAt(t,e){return new oe(t,0,0,t,e.x-e.x*t,e.y-e.y*t)}static nonUniformScaling(t,e){return new oe(t,0,0,e,0,0)}static nonUniformScalingAt(t,e,n){return new oe(t,0,0,e,n.x-n.x*t,n.y-n.y*e)}static rotation(t){const e=Math.cos(t),n=Math.sin(t);return new oe(e,n,-n,e,0,0)}static rotationAt(t,e){const n=Math.cos(t),s=Math.sin(t);return new oe(n,s,-s,n,e.x-e.x*n+e.y*s,e.y-e.y*n-e.x*s)}static rotationFromVector(t){const e=t.unit(),n=e.x,s=e.y;return new oe(n,s,-s,n,0,0)}static xFlip(){return new oe(-1,0,0,1,0,0)}static yFlip(){return new oe(1,0,0,-1,0,0)}static xSkew(t){const e=Math.tan(t);return new oe(1,0,e,1,0,0)}static ySkew(t){const e=Math.tan(t);return new oe(1,e,0,1,0,0)}multiply(t){return this.isIdentity()?t:t.isIdentity()?this:new this.constructor(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)}inverse(){if(this.isIdentity())return this;const t=this.a*this.d-this.b*this.c;if(0===t)throw new Error("Matrix is not invertible");const e=1/t,n=this.f*this.c-this.e*this.d,s=this.e*this.b-this.f*this.a;return new this.constructor(this.d*e,-this.b*e,-this.c*e,this.a*e,n*e,s*e)}translate(t,e){return new this.constructor(this.a,this.b,this.c,this.d,this.a*t+this.c*e+this.e,this.b*t+this.d*e+this.f)}scale(t){return new this.constructor(this.a*t,this.b*t,this.c*t,this.d*t,this.e,this.f)}scaleAt(t,e){const n=e.x-t*e.x,s=e.y-t*e.y;return new this.constructor(this.a*t,this.b*t,this.c*t,this.d*t,this.a*n+this.c*s+this.e,this.b*n+this.d*s+this.f)}scaleNonUniform(t,e){return new this.constructor(this.a*t,this.b*t,this.c*e,this.d*e,this.e,this.f)}scaleNonUniformAt(t,e,n){const s=n.x-t*n.x,r=n.y-e*n.y;return new this.constructor(this.a*t,this.b*t,this.c*e,this.d*e,this.a*s+this.c*r+this.e,this.b*s+this.d*r+this.f)}rotate(t){const e=Math.cos(t),n=Math.sin(t);return new this.constructor(this.a*e+this.c*n,this.b*e+this.d*n,this.a*-n+this.c*e,this.b*-n+this.d*e,this.e,this.f)}rotateAt(t,e){const n=Math.cos(t),s=Math.sin(t),r=e.x,i=e.y,a=this.a*n+this.c*s,o=this.b*n+this.d*s,c=this.c*n-this.a*s,u=this.d*n-this.b*s;return new this.constructor(a,o,c,u,(this.a-a)*r+(this.c-c)*i+this.e,(this.b-o)*r+(this.d-u)*i+this.f)}rotateFromVector(t){const e=t.unit(),n=e.x,s=e.y;return new this.constructor(this.a*n+this.c*s,this.b*n+this.d*s,this.a*-s+this.c*n,this.b*-s+this.d*n,this.e,this.f)}flipX(){return new this.constructor(-this.a,-this.b,this.c,this.d,this.e,this.f)}flipY(){return new this.constructor(this.a,this.b,-this.c,-this.d,this.e,this.f)}skewX(t){const e=Math.tan(t);return new this.constructor(this.a,this.b,this.c+this.a*e,this.d+this.b*e,this.e,this.f)}skewY(t){const e=Math.tan(t);return new this.constructor(this.a+this.c*e,this.b+this.d*e,this.c,this.d,this.e,this.f)}isIdentity(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.e&&0===this.f}isInvertible(){return this.a*this.d-this.b*this.c!==0}getScale(){return{scaleX:Math.sqrt(this.a*this.a+this.c*this.c),scaleY:Math.sqrt(this.b*this.b+this.d*this.d)}}getDecomposition(){const t=.5*(this.a+this.d),e=.5*(this.a-this.d),n=.5*(this.b+this.c),s=.5*(this.b-this.c),r=Math.sqrt(t*t+s*s),i=Math.sqrt(e*e+n*n),a=r+i,o=r-i,c=Math.atan2(n,e),u=Math.atan2(s,t),h=.5*(u-c),l=.5*(u+c);return{translation:this.constructor.translation(this.e,this.f),rotation:this.constructor.rotation(l),scale:this.constructor.nonUniformScaling(a,o),rotation0:this.constructor.rotation(h)}}equals(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f}precisionEquals(t,e){return Math.abs(this.a-t.a)<e&&Math.abs(this.b-t.b)<e&&Math.abs(this.c-t.c)<e&&Math.abs(this.d-t.d)<e&&Math.abs(this.e-t.e)<e&&Math.abs(this.f-t.f)<e}toString(){return`matrix(${this.a},${this.b},${this.c},${this.d},${this.e},${this.f})`}}oe.IDENTITY=new oe,oe.IDENTITY.isIdentity=()=>!0;function ce(t){return"number"===typeof t?t?t<0?-1:1:t===t?t:NaN:NaN}class ue{constructor(...t){this.coefs=[];for(let e=t.length-1;e>=0;e--)this.coefs.push(t[e]);this._variable="t",this._s=0}static interpolate(t,e,n,s,r){if(t.constructor!==Array||e.constructor!==Array)throw new TypeError("xs and ys must be arrays");if(isNaN(n)||isNaN(s)||isNaN(r))throw new TypeError("n, offset, and x must be numbers");let i,a,o=0;const c=new Array(n),u=new Array(n);let h=0,l=Math.abs(r-t[s]);for(i=0;i<n;i++){const n=Math.abs(r-t[s+i]);n<l&&(h=i,l=n),c[i]=u[i]=e[s+i]}a=e[s+h],h--;for(let p=1;p<n;p++){for(i=0;i<n-p;i++){const e=t[s+i]-r,n=t[s+i+p]-r,a=c[i+1]-u[i];let o=e-n;if(0===o)throw new RangeError("Unable to interpolate polynomial. Two numbers in n were identical (to within roundoff)");o=a/o,u[i]=n*o,c[i]=e*o}o=2*(h+1)<n-p?c[h+1]:u[h--],a+=o}return{y:a,dy:o}}static newtonSecantBisection(t,e,n,s,r,i){let a,o,c,u,h,l,p,y=0,f=0;a=t;const x=Math.pow(10,-14),d="number"===typeof r&&"number"===typeof i;if(d){if(r>i)throw new RangeError("Min must be greater than max");if(l=e(r),p=e(i),ce(l)===ce(p))throw new RangeError("Y values of bounds must be of opposite sign")}const m=function(){return Math.abs(c)<=x*Math.abs(a)||f===a-c-a};for(let b=0;b<s;b++){if(o=n(a),0===o){if(0===y)throw new RangeError("df(x) is zero");o=y}if(y=o,h=e(a),c=h/o,u=a-c,m())break;if(d){if(ce(h)===ce(p))i=a,p=h;else{if(ce(h)!==ce(l)){a=u;break}r=a,l=h}if(u<r||u>i){if(ce(l)===ce(p))break;const t=50,e=.25,n=p-l,s=i-r;if(c=0===n?a-(r+.5*s):Math.abs(n/Math.min(l,p))>t?a-(r+s*(.5+(Math.abs(l)<Math.abs(p)?-e:e))):a-(r-l/n*s),u=a-c,m())break}}f=a-u,a=u}return a}clone(){const t=new ue;return t.coefs=this.coefs.slice(),t}eval(t){if(isNaN(t))throw new TypeError(`Parameter must be a number. Found '${t}'`);let e=0;for(let n=this.coefs.length-1;n>=0;n--)e=e*t+this.coefs[n];return e}add(t){const e=new ue,n=this.getDegree(),s=t.getDegree(),r=Math.max(n,s);for(let i=0;i<=r;i++){const r=i<=n?this.coefs[i]:0,a=i<=s?t.coefs[i]:0;e.coefs[i]=r+a}return e}multiply(t){const e=new ue;for(let n=0;n<=this.getDegree()+t.getDegree();n++)e.coefs.push(0);for(let n=0;n<=this.getDegree();n++)for(let s=0;s<=t.getDegree();s++)e.coefs[n+s]+=this.coefs[n]*t.coefs[s];return e}divideEqualsScalar(t){for(let e=0;e<this.coefs.length;e++)this.coefs[e]/=t}simplifyEquals(t=1e-12){for(let e=this.getDegree();e>=0&&Math.abs(this.coefs[e])<=t;e--)this.coefs.pop()}removeZerosEquals(t=1e-15){const e=this.coefs,n=10*t*Math.abs(e.reduce((t,e)=>Math.abs(e)>Math.abs(t)?e:t));for(let s=0;s<e.length-1;s++)Math.abs(e[s])<n&&(e[s]=0);return this}monicEquals(){const t=this.coefs;return 1!==t[t.length-1]&&this.divideEqualsScalar(t[t.length-1]),this}toString(){const t=[],e=[];for(let s=this.coefs.length-1;s>=0;s--){let n=Math.round(1e3*this.coefs[s])/1e3;if(0!==n){const r=n<0?" - ":" + ";n=Math.abs(n),s>0&&(1===n?n=this._variable:n+=this._variable),s>1&&(n+="^"+s),e.push(r),t.push(n)}}e[0]=" + "===e[0]?"":"-";let n="";for(let s=0;s<t.length;s++)n+=e[s]+t[s];return n}bisection(t,e,n=1e-6,s=15){let r,i=this.eval(t),a=this.eval(e);if(Math.abs(i)<=n)r=t;else if(Math.abs(a)<=n)r=e;else if(i*a<=0){const o=Math.log(e-t),c=Math.LN10*s,u=Math.ceil((o+c)/Math.LN2);for(let s=0;s<u;s++){r=.5*(t+e);const s=this.eval(r);if(Math.abs(s)<=n)break;s*i<0?(e=r,a=s):(t=r,i=s)}}return r}trapezoid(t,e,n){if(isNaN(t)||isNaN(e)||isNaN(n))throw new TypeError("Parameters must be numbers");const s=e-t;if(1===n){const n=this.eval(t),r=this.eval(e);this._s=.5*s*(n+r)}else{const e=1<<n-2,r=s/e;let i=t+.5*r,a=0;for(let t=0;t<e;t++)a+=this.eval(i),i+=r;this._s=.5*(this._s+s*a/e)}if(isNaN(this._s))throw new TypeError("this._s is NaN");return this._s}simpson(t,e){if(isNaN(t)||isNaN(e))throw new TypeError("Parameters must be numbers");const n=e-t;let s=.5*n*(this.eval(t)+this.eval(e)),r=s,i=4*s/3,a=i,o=s;let c=1;for(let u=2;u<=20;u++){const e=n/c;let u=t+.5*e,h=0;for(let t=1;t<=c;t++)h+=this.eval(u),u+=e;if(r=.5*(r+n*h/c),s=r,i=(4*s-o)/3,Math.abs(i-a)<1e-7*Math.abs(a))break;a=i,o=s,c<<=1}return i}romberg(t,e){if(isNaN(t)||isNaN(e))throw new TypeError("Parameters must be numbers");const n=new Array(21),s=new Array(21);let r={y:0,dy:0};s[0]=1;for(let i=1;i<=20&&(n[i-1]=this.trapezoid(t,e,i),!(i>=3&&(r=ue.interpolate(s,n,3,i-3,0),Math.abs(r.dy)<=1e-6*r.y)));i++)n[i]=n[i-1],s[i]=.25*s[i-1];return r.y}zeroErrorEstimate(t){const e=this;if("undefined"===typeof t){const n=e.bounds();t=Math.max(Math.abs(n.minX),Math.abs(n.maxX))}if(t<.001)return 2*Math.abs(e.eval(1e-15));const n=e.coefs.length-1,s=e.coefs[n];return 10*1e-15*e.coefs.reduce((e,n,r)=>{const i=n/s*Math.pow(t,r);return i>e?i:e},0)}boundsUpperRealFujiwara(){let t=this.coefs;const e=t.length-1,n=t[e];1!==n&&(t=this.coefs.map(t=>t/n));const s=t.map((t,n)=>n<e?Math.pow(Math.abs(0===n?t/2:t),1/(e-n)):t);let r;const i=function(t,e,n){return r(n)&&(t.max<e?(t.nearmax=t.max,t.max=e):t.nearmax<e&&(t.nearmax=e)),t};r=function(n){return n<e&&t[n]<0};const a=s.reduce(i,{max:0,nearmax:0});return r=function(n){return n<e&&(e%2===n%2?t[n]<0:t[n]>0)},{negX:-2*s.reduce(i,{max:0,nearmax:0}).max,posX:2*a.max}}boundsLowerRealFujiwara(){const t=new ue;t.coefs=this.coefs.slice().reverse();const e=t.boundsUpperRealFujiwara();return e.negX=1/e.negX,e.posX=1/e.posX,e}bounds(){const t=this.boundsUpperRealFujiwara(),e={minX:t.negX,maxX:t.posX};return 0===t.negX&&0===t.posX?e:(0===t.negX?e.minX=this.boundsLowerRealFujiwara().posX:0===t.posX&&(e.maxX=this.boundsLowerRealFujiwara().negX),e.minX>e.maxX&&(e.minX=e.maxX=0),e)}boundUpperAbsRouche(){const t=this.coefs,e=t.length-1;return 1+t.reduce((t,n,s)=>s!==e&&t<(n=Math.abs(n))?n:t,0)/Math.abs(t[e])}boundLowerAbsRouche(){const t=this.coefs,e=t.reduce((t,e,n)=>0!==n&&t<(e=Math.abs(e))?e:t,0);return Math.abs(t[0])/(Math.abs(t[0])+e)}boundsRealLaguerre(){const t=this.coefs,e=t.length-1,n=-t[e-1]/(e*t[e]),s=t[e-1]*t[e-1]-2*e/(e-1)*t[e]*t[e-2];let r=(e-1)/(e*t[e])*Math.sqrt(s);return r<0&&(r=-r),{minX:n-r,maxX:n+r}}countRootsDescartes(){const t=this.coefs,e=t.length-1,n=t.reduce((t,e,n)=>(0!==t.prev_a&&0!==e&&(t.prev_a<0===e>0&&t.pos++,n%2===0!==t.prev_a<0===(n%2===1!==e>0)&&t.neg++),t.prev_a=e,t),{pos:0,neg:0,prev_a:0});return{maxRealPos:n.pos,maxRealNeg:n.neg,minComplex:e-(n.pos+n.neg)}}getDegree(){return this.coefs.length-1}getDerivative(){const t=new ue;for(let e=1;e<this.coefs.length;e++)t.coefs.push(e*this.coefs[e]);return t}getRoots(){let t;switch(this.simplifyEquals(),this.getDegree()){case 0:t=[];break;case 1:t=this.getLinearRoot();break;case 2:t=this.getQuadraticRoots();break;case 3:t=this.getCubicRoots();break;case 4:t=this.getQuarticRoots();break;default:t=[]}return t}getRootsInInterval(t,e){const n=[];function s(t){"number"===typeof t&&n.push(t)}if(0===this.getDegree())throw new RangeError("Unexpected empty polynomial");if(1===this.getDegree())s(this.bisection(t,e));else{const n=this.getDerivative().getRootsInInterval(t,e);if(n.length>0){s(this.bisection(t,n[0]));for(let t=0;t<=n.length-2;t++)s(this.bisection(n[t],n[t+1]));s(this.bisection(n[n.length-1],e))}else s(this.bisection(t,e))}return n}getLinearRoot(){const t=[],e=this.coefs[1];return 0!==e&&t.push(-this.coefs[0]/e),t}getQuadraticRoots(){const t=[];if(2===this.getDegree()){const e=this.coefs[2],n=this.coefs[1]/e,s=n*n-4*(this.coefs[0]/e);if(s>0){const e=Math.sqrt(s);t.push(.5*(-n+e)),t.push(.5*(-n-e))}else 0===s&&t.push(.5*-n)}return t}getCubicRoots(){const t=[];if(3===this.getDegree()){const e=this.coefs[3],n=this.coefs[2]/e,s=this.coefs[1]/e,r=(3*s-n*n)/3,i=(2*n*n*n-9*s*n+27*(this.coefs[0]/e))/27,a=n/3;let o=i*i/4+r*r*r/27;const c=i/2,u=this.zeroErrorEstimate();if(Math.abs(o)<=u&&(o=0),o>0){const e=Math.sqrt(o);let n,s=-c+e;n=s>=0?Math.pow(s,1/3):-Math.pow(-s,1/3),s=-c-e,s>=0?n+=Math.pow(s,1/3):n-=Math.pow(-s,1/3),t.push(n-a)}else if(o<0){const e=Math.sqrt(-r/3),n=Math.atan2(Math.sqrt(-o),-c)/3,s=Math.cos(n),i=Math.sin(n),u=Math.sqrt(3);t.push(2*e*s-a),t.push(-e*(s+u*i)-a),t.push(-e*(s-u*i)-a)}else{let e;e=c>=0?-Math.pow(c,1/3):Math.pow(-c,1/3),t.push(2*e-a),t.push(-e-a)}}return t}getQuarticRoots(){let t=[];const e=this.getDegree();if(4===e){const n=new ue;n.coefs=this.coefs.slice(),n.divideEqualsScalar(n.coefs[e]);const s=1e-15;Math.abs(n.coefs[0])<10*s*Math.abs(n.coefs[3])&&(n.coefs[0]=0);const r=n.getDerivative(),i=r.getRoots().sort((t,e)=>t-e),a=[],o=i.length-1,c=this.bounds(),u=Math.max(Math.abs(c.minX),Math.abs(c.maxX)),h=this.zeroErrorEstimate(u);for(let t=0;t<=o;t++)a.push(n.eval(i[t]));for(let t=0;t<=o;t++)Math.abs(a[t])<h&&(a[t]=0);let l=0;const p=Math.max(.1*(c.maxX-c.minX)/e,s),y=[],f=[];if(o>-1){for(0!==a[0]?ce(a[0])!==ce(n.eval(i[0]-p)-a[0])&&(y.push(i[0]-p),f.push([c.minX,i[0]])):(t.push(i[0],i[0]),l++);l<o;l++)0===a[l+1]?(t.push(i[l+1],i[l+1]),l++):ce(a[l])!==ce(a[l+1])&&(y.push((i[l]+i[l+1])/2),f.push([i[l],i[l+1]]));0!==a[o]&&ce(a[o])!==ce(n.eval(i[o]+p)-a[o])&&(y.push(i[o]+p),f.push([i[o],c.maxX]))}const x=function(t){return n.eval(t)},d=function(t){return r.eval(t)};if(y.length>0)for(l=0;l<y.length;l++)y[l]=ue.newtonSecantBisection(y[l],x,d,32,f[l][0],f[l][1]);t=t.concat(y)}return t}}var he=ue;var le=function(){var t=function(t,e,n,s){for(n=n||{},s=t.length;s--;n[t[s]]=e);return n},e=[1,6],n=[1,17],s=[1,7],r=[1,10],i=[1,13],a=[1,28],o=[1,14],c=[1,34],u=[1,15],h=[1,33],l=[1,21],p=[1,24],y=[1,25],f=[1,29],x=[1,30],d=[1,32],m=[1,31],b=[1,5],g=[1,5,14,16,24,28,41],v=[1,57],w=[1,59],E=[1,58],M=[1,46],P=[1,52],A=[1,41],O=[1,42],R=[1,43],k=[1,44],_=[1,45],T=[1,47],j=[1,49],X=[1,50],I=[1,55],N=[1,56],Y=[1,5,14,16,24,28,41,54],C=[1,5,14,16,24,28,31,32,33,34,41,54],S=[1,5,14,16,24,28,31,32,33,34,38,40,41,54],$=[1,5,14,16,24,28,31,32,33,34,38,40,41,54,58],L=[1,5,14,16,24,28,41,58],D=[1,93],B=[1,98],z=[1,112],q=[1,115],U=[14,41],F=[14,28],G=[1,127],V=[14,24,41],Z=[14,24,41,58],Q=[14,28,58],H=[14,24],J=[1,5,14,28,41],K=[1,151],W={trace:function(){},yy:{},symbols_:{error:2,program:3,statements:4,";":5,statement:6,assignment:7,sequence:8,LET:9,IDENTIFIER:10,"=":11,DEF:12,sequences:13,",":14,steps:15,"|>":16,step:17,"=~":18,namedPattern:19,expression:20,mathExpression:21,MAP:22,"(":23,")":24,PATTERNS:25,"{":26,patterns:27,"}":28,SEQUENCES:29,callExpression:30,"+":31,"-":32,"*":33,"/":34,argumentList:35,memberExpression:36,primaryExpression:37,".":38,integer:39,"[":40,"]":41,boolean:42,NULL_TYPE:43,float:44,string:45,UNDEFINED_TYPE:46,$:47,arrayExpression:48,objectExpression:49,expressionElements:50,expressionElement:51,expressionProperties:52,expressionProperty:53,":":54,argument:55,"...":56,pattern:57,AS:58,ANY_TYPE:59,ARRAY_TYPE:60,BOOLEAN_TYPE:61,TRUE:62,FALSE:63,NUMBER_TYPE:64,OBJECT_TYPE:65,STRING_TYPE:66,arrayPattern:67,objectPattern:68,PATTERN:69,ENUMERATION:70,patternElements:71,namedPatternElement:72,patternElement:73,range:74,"..":75,patternProperties:76,namedPatternProperty:77,namedProperty:78,STRING:79,NUMBER:80,stringOrIdentifier:81,identifiers:82,$accept:0,$end:1},terminals_:{2:"error",5:";",9:"LET",10:"IDENTIFIER",11:"=",12:"DEF",14:",",16:"|>",18:"=~",22:"MAP",23:"(",24:")",25:"PATTERNS",26:"{",28:"}",29:"SEQUENCES",31:"+",32:"-",33:"*",34:"/",38:".",40:"[",41:"]",43:"NULL_TYPE",46:"UNDEFINED_TYPE",47:"$",54:":",56:"...",58:"AS",59:"ANY_TYPE",60:"ARRAY_TYPE",61:"BOOLEAN_TYPE",62:"TRUE",63:"FALSE",64:"NUMBER_TYPE",65:"OBJECT_TYPE",66:"STRING_TYPE",69:"PATTERN",70:"ENUMERATION",75:"..",79:"STRING",80:"NUMBER"},productions_:[0,[3,1],[3,2],[4,3],[4,1],[6,1],[6,1],[7,4],[7,4],[13,3],[13,1],[8,1],[15,3],[15,1],[17,2],[17,1],[20,1],[20,6],[20,4],[20,4],[21,1],[21,3],[21,3],[21,3],[21,3],[30,3],[30,4],[30,1],[36,1],[36,3],[36,3],[36,4],[37,1],[37,1],[37,1],[37,1],[37,1],[37,1],[37,1],[37,1],[37,1],[37,3],[48,2],[48,3],[50,3],[50,1],[51,1],[51,1],[49,2],[49,3],[52,3],[52,1],[53,3],[53,1],[53,1],[35,3],[35,1],[55,1],[55,2],[27,3],[27,1],[19,1],[19,3],[57,1],[57,1],[57,1],[57,1],[57,1],[57,1],[57,1],[57,1],[57,1],[57,1],[57,1],[57,1],[57,1],[57,1],[57,2],[57,2],[57,1],[67,2],[67,3],[71,3],[71,1],[72,1],[72,3],[73,1],[73,3],[73,3],[73,5],[74,3],[74,2],[74,2],[74,1],[68,2],[68,3],[76,3],[76,1],[77,1],[77,3],[78,3],[78,1],[42,1],[42,1],[45,1],[39,1],[44,1],[81,1],[81,1],[82,3],[82,1]],performAction:function(t,e,n,s,r,i,a){var o=i.length-1;switch(r){case 1:return i[o];case 2:return i[o-1];case 3:case 9:case 12:case 44:case 50:case 55:case 59:case 82:case 96:case 109:i[o-2].push(i[o]),this.$=i[o-2];break;case 4:case 10:case 13:case 45:case 51:case 56:case 60:case 83:case 97:case 110:this.$=[i[o]];break;case 5:case 6:case 14:case 15:case 16:case 20:case 27:case 28:case 39:case 40:case 46:case 47:case 54:case 57:case 98:case 107:this.$=i[o];break;case 7:this.$={type:"assignment",name:i[o-2],value:i[o]};break;case 8:this.$={type:"def",name:i[o-2],value:i[o]};break;case 11:this.$={type:"sequence",steps:i[o]};break;case 17:this.$={type:"map",value:[i[o-3],i[o-1]]};break;case 18:this.$={type:"patterns",patterns:i[o-1]};break;case 19:this.$={type:"sequences",sequences:i[o-1]};break;case 21:this.$={type:"add",left:i[o-2],right:i[o]};break;case 22:this.$={type:"subtract",left:i[o-2],right:i[o]};break;case 23:this.$={type:"multiply",left:i[o-2],right:i[o]};break;case 24:this.$={type:"divide",left:i[o-2],right:i[o]};break;case 25:this.$={type:"invoke",name:i[o-2],args:[]};break;case 26:this.$={type:"invoke",name:i[o-3],args:i[o-1]};break;case 29:this.$={type:"get-property",left:i[o-2],right:i[o]};break;case 30:this.$={type:"get-index",left:i[o-2],right:i[o]};break;case 31:this.$={type:"get-index",left:i[o-3],right:i[o-1]};break;case 32:this.$={type:"boolean",value:i[o]};break;case 33:this.$={type:"boolean",value:null};break;case 34:this.$={type:"number",value:i[o]};break;case 35:this.$={type:"string",value:i[o]};break;case 36:this.$={type:"undefined",value:void 0};break;case 37:this.$={type:"get-value",name:i[o]};break;case 38:this.$={type:"get-structure"};break;case 41:this.$=i[o-1];break;case 42:this.$={type:"array",value:[]};break;case 43:this.$={type:"array",value:i[o-1]};break;case 48:this.$={type:"object",value:[]};break;case 49:this.$={type:"object",value:i[o-1]};break;case 52:this.$={type:"property",name:i[o-2],value:i[o]};break;case 53:this.$={type:"property",name:i[o],value:null};break;case 58:this.$={type:"spread",expression:i[o]};break;case 61:case 84:i[o].assignTo=null,this.$=i[o];break;case 62:case 85:case 99:i[o-2].assignTo=i[o],this.$=i[o-2];break;case 63:this.$={type:"pattern",patternType:"any",value:null};break;case 64:this.$={type:"pattern",patternType:"array",value:null};break;case 65:this.$={type:"pattern",patternType:"boolean",value:null};break;case 66:this.$={type:"pattern",patternType:"boolean",value:!0};break;case 67:this.$={type:"pattern",patternType:"boolean",value:!1};break;case 68:this.$={type:"pattern",patternType:"null",value:null};break;case 69:this.$={type:"pattern",patternType:"number",value:null};break;case 70:this.$={type:"pattern",patternType:"number",value:i[o]};break;case 71:this.$={type:"pattern",patternType:"object",value:null};break;case 72:this.$={type:"pattern",patternType:"string",value:null};break;case 73:this.$={type:"pattern",patternType:"string",value:i[o]};break;case 74:this.$={type:"pattern",patternType:"undefined",value:null};break;case 75:case 76:this.$=i[o];break;case 77:this.$={type:"pattern-reference",name:i[o]};break;case 78:this.$={type:"enumeration-reference",name:i[o]};break;case 79:this.$={type:"pattern",patternType:"reference",value:i[o]};break;case 80:this.$={type:"pattern",patternType:"array-pattern",value:[]};break;case 81:this.$={type:"pattern",patternType:"array-pattern",value:i[o-1]};break;case 86:this.$={type:"element",pattern:i[o],range:{type:"range",start:1,stop:1}};break;case 87:this.$={type:"element",pattern:i[o-2],range:i[o]};break;case 88:this.$={type:"element-group",elements:i[o-1],range:{type:"range",start:1,stop:1}};break;case 89:this.$={type:"element-group",elements:i[o-3],range:i[o]};break;case 90:this.$={type:"range",start:i[o-2],stop:i[o]};break;case 91:this.$={type:"range",start:0,stop:i[o]};break;case 92:this.$={type:"range",start:i[o-1],stop:1/0};break;case 93:this.$={type:"range",start:i[o],stop:i[o]};break;case 94:this.$={type:"pattern",patternType:"object",value:null};break;case 95:this.$={type:"pattern",patternType:"object-pattern",value:i[o-1]};break;case 100:this.$={type:"property",name:i[o-2],pattern:i[o]};break;case 101:this.$={type:"property",name:i[o],pattern:{type:"pattern",patternType:"any",value:null}};break;case 102:this.$=!0;break;case 103:this.$=!1;break;case 104:case 108:this.$=i[o].substring(1,i[o].length-1);break;case 105:this.$=parseInt(i[o]);break;case 106:this.$=parseFloat(i[o])}},table:[{3:1,4:2,6:3,7:4,8:5,9:e,10:n,12:s,15:8,17:9,18:r,20:11,21:12,22:i,23:a,25:o,26:c,29:u,30:16,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,62:f,63:x,79:d,80:m},{1:[3]},{1:[2,1],5:[1,35]},t(b,[2,4]),t(b,[2,5]),t(b,[2,6]),{10:[1,36]},{10:[1,37]},t([1,5,14,24,28,41],[2,11],{16:[1,38]}),t(g,[2,13]),{10:v,19:39,26:w,40:E,43:M,44:48,45:51,46:P,57:40,59:A,60:O,61:R,62:k,63:_,64:T,65:j,66:X,67:53,68:54,69:I,70:N,79:d,80:m},t(g,[2,15]),t(Y,[2,16],{31:[1,60],32:[1,61],33:[1,62],34:[1,63]}),{23:[1,64]},{26:[1,65]},{26:[1,66]},t(C,[2,20]),t(S,[2,37],{23:[1,67]}),t(C,[2,27],{38:[1,68],40:[1,69]}),t(S,[2,28]),t(S,[2,32]),t(S,[2,33]),t(S,[2,34]),t(S,[2,35]),t(S,[2,36]),t(S,[2,38]),t(S,[2,39]),t(S,[2,40]),{10:n,20:70,21:12,22:i,23:a,25:o,26:c,29:u,30:16,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,62:f,63:x,79:d,80:m},t(S,[2,102]),t(S,[2,103]),t($,[2,106]),t($,[2,104]),{7:75,9:e,10:n,12:s,20:74,21:12,22:i,23:a,25:o,26:c,29:u,30:16,36:18,37:19,40:h,41:[1,71],42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,50:72,51:73,62:f,63:x,79:d,80:m},{7:80,9:e,10:n,12:s,20:79,21:12,22:i,23:a,25:o,26:c,28:[1,76],29:u,30:16,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,52:77,53:78,62:f,63:x,79:d,80:m},{1:[2,2],6:81,7:4,8:5,9:e,10:n,12:s,15:8,17:9,18:r,20:11,21:12,22:i,23:a,25:o,26:c,29:u,30:16,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,62:f,63:x,79:d,80:m},{11:[1,82]},{11:[1,83]},{10:n,17:84,18:r,20:11,21:12,22:i,23:a,25:o,26:c,29:u,30:16,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,62:f,63:x,79:d,80:m},t(g,[2,14]),t(g,[2,61],{58:[1,85]}),t(L,[2,63]),t(L,[2,64]),t(L,[2,65]),t(L,[2,66]),t(L,[2,67]),t(L,[2,68]),t(L,[2,69]),t(L,[2,70]),t(L,[2,71]),t(L,[2,72]),t(L,[2,73]),t(L,[2,74]),t(L,[2,75]),t(L,[2,76]),{10:[1,86]},{10:[1,87]},t(L,[2,79]),{10:v,23:D,26:w,40:E,41:[1,88],43:M,44:48,45:51,46:P,57:92,59:A,60:O,61:R,62:k,63:_,64:T,65:j,66:X,67:53,68:54,69:I,70:N,71:89,72:90,73:91,79:d,80:m},{10:B,28:[1,94],76:95,77:96,78:97},{10:n,23:a,26:c,30:99,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,62:f,63:x,79:d,80:m},{10:n,23:a,26:c,30:100,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,62:f,63:x,79:d,80:m},{10:n,23:a,26:c,30:101,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,62:f,63:x,79:d,80:m},{10:n,23:a,26:c,30:102,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,62:f,63:x,79:d,80:m},{10:n,20:103,21:12,22:i,23:a,25:o,26:c,29:u,30:16,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,62:f,63:x,79:d,80:m},{10:v,19:105,26:w,27:104,40:E,43:M,44:48,45:51,46:P,57:40,59:A,60:O,61:R,62:k,63:_,64:T,65:j,66:X,67:53,68:54,69:I,70:N,79:d,80:m},{8:107,10:n,13:106,15:8,17:9,18:r,20:11,21:12,22:i,23:a,25:o,26:c,29:u,30:16,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,62:f,63:x,79:d,80:m},{10:n,20:111,21:12,22:i,23:a,24:[1,108],25:o,26:c,29:u,30:16,35:109,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,55:110,56:z,62:f,63:x,79:d,80:m},{10:[1,113],39:114,80:q},{39:116,80:q},{24:[1,117]},t(S,[2,42]),{14:[1,119],41:[1,118]},t(U,[2,45]),t(U,[2,46]),t(U,[2,47]),t(S,[2,48]),{14:[1,121],28:[1,120]},t(F,[2,51]),t(F,[2,53],{54:[1,122]}),t(F,[2,54]),t(b,[2,3]),{8:123,10:n,15:8,17:9,18:r,20:11,21:12,22:i,23:a,25:o,26:c,29:u,30:16,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,62:f,63:x,79:d,80:m},{8:124,10:n,15:8,17:9,18:r,20:11,21:12,22:i,23:a,25:o,26:c,29:u,30:16,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,62:f,63:x,79:d,80:m},t(g,[2,12]),{10:[1,125]},t(L,[2,77]),t(L,[2,78]),t(L,[2,80]),{14:G,41:[1,126]},t(V,[2,83]),t(V,[2,84],{58:[1,128]}),t(Z,[2,86],{5:[1,129]}),{10:v,23:D,26:w,40:E,43:M,44:48,45:51,46:P,57:92,59:A,60:O,61:R,62:k,63:_,64:T,65:j,66:X,67:53,68:54,69:I,70:N,71:130,72:90,73:91,79:d,80:m},t(L,[2,94]),{14:[1,132],28:[1,131]},t(F,[2,97]),t(F,[2,98],{58:[1,133]}),t(Q,[2,101],{54:[1,134]}),t(C,[2,21]),t(C,[2,22]),t(C,[2,23]),t(C,[2,24]),{14:[1,135]},{14:[1,137],28:[1,136]},t(F,[2,60]),{14:[1,139],28:[1,138]},t(F,[2,10]),t(C,[2,25]),{14:[1,141],24:[1,140]},t(H,[2,56]),t(H,[2,57]),{10:n,20:142,21:12,22:i,23:a,25:o,26:c,29:u,30:16,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,62:f,63:x,79:d,80:m},t(S,[2,29]),t(S,[2,30]),t([1,5,14,16,24,28,31,32,33,34,38,40,41,54,58,75],[2,105]),{41:[1,143]},t(S,[2,41]),t(S,[2,43]),{7:75,9:e,10:n,12:s,20:74,21:12,22:i,23:a,25:o,26:c,29:u,30:16,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,51:144,62:f,63:x,79:d,80:m},t(S,[2,49]),{7:80,9:e,10:n,12:s,20:79,21:12,22:i,23:a,25:o,26:c,29:u,30:16,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,53:145,62:f,63:x,79:d,80:m},{8:146,10:n,15:8,17:9,18:r,20:11,21:12,22:i,23:a,25:o,26:c,29:u,30:16,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,62:f,63:x,79:d,80:m},t(J,[2,7]),t(J,[2,8]),t(g,[2,62]),t(L,[2,81]),{10:v,23:D,26:w,40:E,43:M,44:48,45:51,46:P,57:92,59:A,60:O,61:R,62:k,63:_,64:T,65:j,66:X,67:53,68:54,69:I,70:N,72:147,73:91,79:d,80:m},{10:[1,148]},{39:150,74:149,75:K,80:q},{14:G,24:[1,152]},t(L,[2,95]),{10:B,77:153,78:97},{10:[1,154]},{10:v,26:w,40:E,43:M,44:48,45:51,46:P,57:155,59:A,60:O,61:R,62:k,63:_,64:T,65:j,66:X,67:53,68:54,69:I,70:N,79:d,80:m},{8:156,10:n,15:8,17:9,18:r,20:11,21:12,22:i,23:a,25:o,26:c,29:u,30:16,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,62:f,63:x,79:d,80:m},t(Y,[2,18]),{10:v,19:157,26:w,40:E,43:M,44:48,45:51,46:P,57:40,59:A,60:O,61:R,62:k,63:_,64:T,65:j,66:X,67:53,68:54,69:I,70:N,79:d,80:m},t(Y,[2,19]),{8:158,10:n,15:8,17:9,18:r,20:11,21:12,22:i,23:a,25:o,26:c,29:u,30:16,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,62:f,63:x,79:d,80:m},t(C,[2,26]),{10:n,20:111,21:12,22:i,23:a,25:o,26:c,29:u,30:16,36:18,37:19,40:h,42:20,43:l,44:22,45:23,46:p,47:y,48:26,49:27,55:159,56:z,62:f,63:x,79:d,80:m},t(H,[2,58]),t(S,[2,31]),t(U,[2,44]),t(F,[2,50]),t(F,[2,52]),t(V,[2,82]),t(V,[2,85]),t(Z,[2,87]),t(Z,[2,93],{75:[1,160]}),{39:161,80:q},t(Z,[2,88],{5:[1,162]}),t(F,[2,96]),t(F,[2,99]),t(Q,[2,100]),{24:[1,163]},t(F,[2,59]),t(F,[2,9]),t(H,[2,55]),t(Z,[2,92],{39:164,80:q}),t(Z,[2,91]),{39:150,74:165,75:K,80:q},t(Y,[2,17]),t(Z,[2,90]),t(Z,[2,89])],defaultActions:{},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],s=[null],r=[],i=this.table,a="",o=0,c=0,u=0,h=2,l=1,p=r.slice.call(arguments,1),y=Object.create(this.lexer),f={yy:{}};for(var x in this.yy)Object.prototype.hasOwnProperty.call(this.yy,x)&&(f.yy[x]=this.yy[x]);y.setInput(t,f.yy),f.yy.lexer=y,f.yy.parser=this,"undefined"==typeof y.yylloc&&(y.yylloc={});var d=y.yylloc;r.push(d);var m=y.options&&y.options.ranges;"function"===typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,g,v,w,E,M,P,A,O,R=function(){var t;return"number"!==typeof(t=y.lex()||l)&&(t=e.symbols_[t]||t),t},k={};;){if(v=n[n.length-1],this.defaultActions[v]?w=this.defaultActions[v]:(null!==b&&"undefined"!=typeof b||(b=R()),w=i[v]&&i[v][b]),"undefined"===typeof w||!w.length||!w[0]){var _="";for(M in O=[],i[v])this.terminals_[M]&&M>h&&O.push("'"+this.terminals_[M]+"'");_=y.showPosition?"Parse error on line "+(o+1)+":\n"+y.showPosition()+"\nExpecting "+O.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(o+1)+": Unexpected "+(b==l?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(_,{text:y.match,token:this.terminals_[b]||b,line:y.yylineno,loc:d,expected:O})}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+b);switch(w[0]){case 1:n.push(b),s.push(y.yytext),r.push(y.yylloc),n.push(w[1]),b=null,g?(b=g,g=null):(c=y.yyleng,a=y.yytext,o=y.yylineno,d=y.yylloc,u>0&&u--);break;case 2:if(P=this.productions_[w[1]][1],k.$=s[s.length-P],k._$={first_line:r[r.length-(P||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(P||1)].first_column,last_column:r[r.length-1].last_column},m&&(k._$.range=[r[r.length-(P||1)].range[0],r[r.length-1].range[1]]),"undefined"!==typeof(E=this.performAction.apply(k,[a,c,o,f.yy,w[1],s,r].concat(p))))return E;P&&(n=n.slice(0,-1*P*2),s=s.slice(0,-1*P),r=r.slice(0,-1*P)),n.push(this.productions_[w[1]][0]),s.push(k.$),r.push(k._$),A=i[n[n.length-2]][n[n.length-1]],n.push(A);break;case 3:return!0}}return!0}},tt={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var s=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===s.length?this.yylloc.first_column:0)+s[s.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,s,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),(s=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var i in r)this[i]=r[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,s;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),i=0;i<r.length;i++)if((n=this._input.match(this.rules[r[i]]))&&(!e||n[0].length>e[0].length)){if(e=n,s=i,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,r[i])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,r[s]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,s){switch(n){case 0:case 1:break;case 2:return 59;case 3:return 60;case 4:return 58;case 5:return 61;case 6:return 12;case 7:return 70;case 8:return 63;case 9:return 9;case 10:return 22;case 11:return 25;case 12:return 43;case 13:return 64;case 14:return 65;case 15:return 29;case 16:return 66;case 17:return 62;case 18:return 46;case 19:return 80;case 20:return 79;case 21:return 23;case 22:return 24;case 23:return 26;case 24:return 28;case 25:return 40;case 26:return 41;case 27:return 16;case 28:return"|";case 29:return 14;case 30:return 54;case 31:return 5;case 32:return 18;case 33:return 11;case 34:return"<=";case 35:return 56;case 36:return 75;case 37:return 38;case 38:return"_";case 39:return 31;case 40:return 32;case 41:return 33;case 42:return 34;case 43:return 47;case 44:return 10}},rules:[/^(?:\s+)/,/^(?:\/\/.*)/,/^(?:any\b)/,/^(?:array\b)/,/^(?:as\b)/,/^(?:boolean\b)/,/^(?:def\b)/,/^(?:enum\b)/,/^(?:false\b)/,/^(?:let\b)/,/^(?:map\b)/,/^(?:patterns\b)/,/^(?:null\b)/,/^(?:number\b)/,/^(?:object\b)/,/^(?:sequences\b)/,/^(?:string\b)/,/^(?:true\b)/,/^(?:undefined\b)/,/^(?:[-+]?(0|[1-9]\d*)(\.\d+)?)/,/^(?:"[^"\r\n]*")/,/^(?:\()/,/^(?:\))/,/^(?:{)/,/^(?:})/,/^(?:\[)/,/^(?:\])/,/^(?:\|>)/,/^(?:\|)/,/^(?:,)/,/^(?::)/,/^(?:;)/,/^(?:=~)/,/^(?:=)/,/^(?:<=)/,/^(?:\.{3})/,/^(?:\.{2})/,/^(?:\.)/,/^(?:_)/,/^(?:\+)/,/^(?:-)/,/^(?:\*)/,/^(?:\/)/,/^(?:\$)/,/^(?:[a-zA-Z_][a-zA-Z0-9_]*)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!0}}};function et(){this.yy={}}return W.lexer=tt,et.prototype=W,W.Parser=et,new et}();function pe(t){switch(t){case null:return"null";case void 0:return"undefined";default:return Array.isArray(t)?"array":typeof t}}function ye(t){return Array.isArray(t)?t.length:0}function fe(t,e){const n=[];if(Array.isArray(t)&&t.length>0&&t.every(t=>Array.isArray(t))){const s=Math.max(...t.map(t=>t.length));for(let r=0;r<s;r++){const s=[];for(const n of t)s.push(r<n.length?n[r]:e);n.push(s)}}return n}function xe(t,e,n,s){const{length:r}=t,i=[];n=void 0===n?e:n,e=Math.max(1,e),n=Math.max(1,n);for(let a=0;a<r;a+=n){const n=[];let o=a;for(let i=0;i<e;i++,o++)n.push(o<r?t[o]:s);i.push(n)}return i}function de(t){return Array.isArray(t)?t.slice().reverse():void 0}function me(t,e){return Array.isArray(t)?t.slice().sort(e):void 0}function be(t,e){return t.join(e)}function ge(t){return null!==t&&"object"===typeof t}function ve(t){return ge(t)?Object.keys(t):[]}function we(t){return ge(t)?Object.values(t):[]}function Ee(t){return ge(t)?Object.entries(t):[]}function Me(t){const e={};if(Array.isArray(t))for(const n of t)if(n.length>=2){const[t,s]=n;e[t]=s}return e}function Pe(...t){return t.length>0&&Array.isArray(t[0])?t[0].concat(...t.slice(1)):t.every(t=>ge(t))?Object.assign({},...t):void 0}const Ae={};function Oe(t){return null!==t&&"object"===typeof t}class Re{constructor(t,e){this.type=t,this.text=e}typeis(t){return this.type===t}}Re.UNDEFINED=0,Re.COMMAND=1,Re.NUMBER=2,Re.EOD=3;var ke=Re;var _e=class{constructor(t){null!==t&&void 0!==t||(t=""),this.setPathData(t)}setPathData(t){if("string"!==typeof t)throw new TypeError("The first parameter must be a string");this._pathData=t}getNextToken(){let t=null,e=this._pathData;for(;null===t;)if(null===e||""===e)t=new ke(ke.EOD,"");else if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([AaCcHhLlMmQqSsTtVvZz])/))t=new ke(ke.COMMAND,RegExp.$1),e=e.substr(RegExp.$1.length);else{if(!e.match(/^(([-+]?\d+(\.\d*)?|[-+]?\.\d+)([eE][-+]?\d+)?)/))throw new SyntaxError(`Unrecognized path data: ${e}`);t=new ke(ke.NUMBER,RegExp.$1),e=e.substr(RegExp.$1.length)}return this._pathData=e,t}};const Te="BOP";class je{constructor(){this._lexer=new _e,this._handler=null}parseData(t){if("string"!==typeof t)throw new TypeError(`The first parameter must be a string: ${t}`);null!==this._handler&&"function"===typeof this._handler.beginParse&&this._handler.beginParse();const e=this._lexer;e.setPathData(t);let n=Te,s=null,r=e.getNextToken();for(;!1===r.typeis(ke.EOD);){let t;const i=[];switch(r.type){case ke.COMMAND:if(n===Te&&"M"!==r.text&&"m"!==r.text)throw new SyntaxError(`New paths must begin with a moveto command. Found '${r.text}'`);n=r.text,t=je.PARAMCOUNT[r.text.toUpperCase()],r=e.getNextToken();break;case ke.NUMBER:if(n===Te)throw new SyntaxError(`New paths must begin with a moveto command. Found '${r.text}'`);t=je.PARAMCOUNT[n.toUpperCase()];break;default:throw new SyntaxError(`Unrecognized command type: ${r.type}`)}for(let n=0;n<t;n++){switch(r.type){case ke.COMMAND:throw new SyntaxError(`Parameter must be a number. Found '${r.text}'`);case ke.NUMBER:i[n]=parseFloat(r.text);break;case ke.EOD:throw new SyntaxError("Unexpected end of string");default:throw new SyntaxError(`Unrecognized parameter type. Found type '${r.type}'`)}r=e.getNextToken()}if(null!==this._handler){const t=this._handler,e=je.METHODNAME[n];"a"!==n&&"A"!==n||(i[3]=0!==i[3],i[4]=0!==i[4]),null!==t&&"function"===typeof t[e]&&t[e](...i)}switch(n){case"M":n="L";break;case"m":n="l";break;case"Z":case"z":n="BOP"}if(r===s)throw new SyntaxError(`Parser stalled on '${r.text}'`);s=r}null!==this._handler&&"function"===typeof this._handler.endParse&&this._handler.endParse()}setHandler(t){this._handler=t}}je.PARAMCOUNT={A:7,C:6,H:1,L:2,M:2,Q:4,S:4,T:2,V:1,Z:0},je.METHODNAME={A:"arcAbs",a:"arcRel",C:"curvetoCubicAbs",c:"curvetoCubicRel",H:"linetoHorizontalAbs",h:"linetoHorizontalRel",L:"linetoAbs",l:"linetoRel",M:"movetoAbs",m:"movetoRel",Q:"curvetoQuadraticAbs",q:"curvetoQuadraticRel",S:"curvetoCubicSmoothAbs",s:"curvetoCubicSmoothRel",T:"curvetoQuadraticSmoothAbs",t:"curvetoQuadraticSmoothRel",V:"linetoVerticalAbs",v:"linetoVerticalRel",Z:"closePath",z:"closePath"};var Xe=je;const Ie=2*Math.PI;function Ne(t,e,n,s,r,i,a){r=r*Math.PI/180;const o=Math.cos(r),c=Math.sin(r),u=t.subtract(e).multiply(.5),h=u.x*o+u.y*c,l=u.x*-c+u.y*o,p=h*h,y=l*l,f=p/((n=Math.abs(n))*n)+y/((s=Math.abs(s))*s);if(f>1){const t=Math.sqrt(f);n*=t,s*=t}const x=n*n,d=s*s,m=x*y,b=d*p;let g=(x*d-m-b)/(m+b);Math.abs(g)<1e-6&&(g=0);let v=Math.sqrt(g);i===a&&(v=-v);const w=t.add(e).multiply(.5),E=v*n*l/s,M=v*-s*h/n,P=(h-E)/n,A=(h+E)/n,O=(l-M)/s,R=(l+M)/s,k=new ae(1,0).angleBetween(new ae(P,O));let _=function(t){const e=t%Ie;return e<0?e+Ie:e}(new ae(P,O).angleBetween(new ae(-A,-R)));return!1===a&&(_-=Ie),[E*o-M*c+w.x,E*c+M*o+w.y,n,s,k,k+_]}var Ye=class{constructor(t){this.shapeCreator=t,this.shapes=[],this.firstX=null,this.firstY=null,this.lastX=null,this.lastY=null,this.lastCommand=null}beginParse(){this.shapes=[],this.firstX=null,this.firstY=null,this.lastX=null,this.lastY=null,this.lastCommand=null}addShape(t){this.shapes.push(t)}arcAbs(t,e,n,s,r,i,a){if(0===t||0===e)this.addShape(this.shapeCreator.line(this.lastX,this.lastY,i,a));else{const o=Ne(new re(this.lastX,this.lastY),new re(i,a),t,e,n,s,r);this.addShape(this.shapeCreator.arc(...o))}this.lastCommand="A",this.lastX=i,this.lastY=a}arcRel(t,e,n,s,r,i,a){if(0===t||0===e)this.addShape(this.shapeCreator.line(this.lastX,this.lastY,this.lastX+i,this.lastY+a));else{const o=Ne(new re(this.lastX,this.lastY),new re(this.lastX+i,this.lastY+a),t,e,n,s,r);this.addShape(this.shapeCreator.arc(...o))}this.lastCommand="a",this.lastX+=i,this.lastY+=a}curvetoCubicAbs(t,e,n,s,r,i){this.addShape(this.shapeCreator.cubicBezier(this.lastX,this.lastY,t,e,n,s,r,i)),this.lastX=r,this.lastY=i,this.lastCommand="C"}curvetoCubicRel(t,e,n,s,r,i){this.addShape(this.shapeCreator.cubicBezier(this.lastX,this.lastY,this.lastX+t,this.lastY+e,this.lastX+n,this.lastY+s,this.lastX+r,this.lastY+i)),this.lastX+=r,this.lastY+=i,this.lastCommand="c"}linetoHorizontalAbs(t){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,t,this.lastY)),this.lastX=t,this.lastCommand="H"}linetoHorizontalRel(t){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,this.lastX+t,this.lastY)),this.lastX+=t,this.lastCommand="h"}linetoAbs(t,e){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,t,e)),this.lastX=t,this.lastY=e,this.lastCommand="L"}linetoRel(t,e){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,this.lastX+t,this.lastY+e)),this.lastX+=t,this.lastY+=e,this.lastCommand="l"}movetoAbs(t,e){this.firstX=t,this.firstY=e,this.lastX=t,this.lastY=e,this.lastCommand="M"}movetoRel(t,e){this.firstX+=t,this.firstY+=e,this.lastX+=t,this.lastY+=e,this.lastCommand="m"}curvetoQuadraticAbs(t,e,n,s){this.addShape(this.shapeCreator.quadraticBezier(this.lastX,this.lastY,t,e,n,s)),this.lastX=n,this.lastY=s,this.lastCommand="Q"}curvetoQuadraticRel(t,e,n,s){this.addShape(this.shapeCreator.quadraticBezier(this.lastX,this.lastY,this.lastX+t,this.lastY+e,this.lastX+n,this.lastY+s)),this.lastX+=n,this.lastY+=s,this.lastCommand="q"}curvetoCubicSmoothAbs(t,e,n,s){let r,i;if(this.lastCommand.match(/^[SsCc]$/)){const t=this.shapes[this.shapes.length-1].args[2];r=2*this.lastX-t.x,i=2*this.lastY-t.y}else r=this.lastX,i=this.lastY;this.addShape(this.shapeCreator.cubicBezier(this.lastX,this.lastY,r,i,t,e,n,s)),this.lastX=n,this.lastY=s,this.lastCommand="S"}curvetoCubicSmoothRel(t,e,n,s){let r,i;if(this.lastCommand.match(/^[SsCc]$/)){const t=this.shapes[this.shapes.length-1].args[2];r=2*this.lastX-t.x,i=2*this.lastY-t.y}else r=this.lastX,i=this.lastY;this.addShape(this.shapeCreator.cubicBezier(this.lastX,this.lastY,r,i,this.lastX+t,this.lastY+e,this.lastX+n,this.lastY+s)),this.lastX+=n,this.lastY+=s,this.lastCommand="s"}curvetoQuadraticSmoothAbs(t,e){let n,s;if(this.lastCommand.match(/^[QqTt]$/)){const t=this.shapes[this.shapes.length-1].args[1];n=2*this.lastX-t.x,s=2*this.lastY-t.y}else n=this.lastX,s=this.lastY;this.addShape(this.shapeCreator.quadraticBezier(this.lastX,this.lastY,n,s,t,e)),this.lastX=t,this.lastY=e,this.lastCommand="T"}curvetoQuadraticSmoothRel(t,e){let n,s;if(this.lastCommand.match(/^[QqTt]$/)){const t=this.shapes[this.shapes.length-1].args[1];n=2*this.lastX-t.x,s=2*this.lastY-t.y}else n=this.lastX,s=this.lastY;this.addShape(this.shapeCreator.quadraticBezier(this.lastX,this.lastY,n,s,this.lastX+t,this.lastY+e)),this.lastX+=t,this.lastY+=e,this.lastCommand="t"}linetoVerticalAbs(t){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,this.lastX,t)),this.lastY=t,this.lastCommand="V"}linetoVerticalRel(t){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,this.lastX,this.lastY+t)),this.lastY+=t,this.lastCommand="v"}closePath(){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,this.firstX,this.firstY)),this.lastX=this.firstX,this.lastY=this.firstY,this.lastCommand="z"}};const Ce=.5*Math.PI;class Se{constructor(t,e){this.name=t,this.args=e}static arc(...t){return $e(Se.ARC,t,["center","radiusX","radiusY","startRadians","endRadians"])}static quadraticBezier(...t){return $e(Se.QUADRATIC_BEZIER,t,["p1","p2","p3"])}static cubicBezier(...t){return $e(Se.CUBIC_BEZIER,t,["p1","p2","p3","p4"])}static circle(...t){return $e(Se.CIRCLE,t,["center","radius"])}static ellipse(...t){return $e(Se.ELLIPSE,t,["center","radiusX","radiusY"])}static line(...t){return $e(Se.LINE,t,["p1","p2"])}static path(...t){return $e(Se.PATH,t,["segments"])}static polygon(...t){return $e(Se.POLYGON,t,["points"])}static polyline(...t){return $e(Se.POLYLINE,t,["points"])}static rectangle(...t){const e=$e(Se.RECTANGLE,t,["topLeft","bottomRight","rx","ry"]);let n=e.args.pop(),s=e.args.pop();if(s=void 0===s?0:s,n=void 0===n?0:n,0===s&&0===n)return e;const{x:r,y:i}=e.args[0],{x:a,y:o}=e.args[1],c=a-r,u=o-i;0===s&&(s=n),0===n&&(n=s),s>.5*c&&(s=.5*c),n>.5*u&&(n=.5*u);const h=r,l=i,p=r+s,y=i+n,f=a-s,x=o-n,d=a,m=o,b=[Se.arc(p,y,s,n,2*Ce,3*Ce),Se.line(p,l,f,l),Se.arc(f,y,s,n,3*Ce,4*Ce),Se.line(d,y,d,x),Se.arc(f,x,s,n,0,Ce),Se.line(f,m,p,m),Se.arc(p,x,s,n,Ce,2*Ce),Se.line(h,x,h,y)];return new Se(Se.PATH,b)}}function $e(t,e,n){let s;1===e.length?(e=e[0],s=Array.isArray(e)||"string"===typeof e?t+"Args":t):s=t+"Args";const r=Le.execute(s,e);if(r===Ae)throw new TypeError(`${t} is not in a recognizable format: ${JSON.stringify(e)}`);const i=1===n.length?r[n[0]]:n.map(t=>r[t]);return new Se(t,i)}Se.ARC="Arc",Se.QUADRATIC_BEZIER="Bezier2",Se.CUBIC_BEZIER="Bezier3",Se.CIRCLE="Circle",Se.ELLIPSE="Ellipse",Se.LINE="Line",Se.PATH="Path",Se.POLYGON="Polygon",Se.POLYLINE="Polyline",Se.RECTANGLE="Rectangle";const Le=new class{constructor(){this.symbolTable={},this.functions={},this.messages=[],this.verbose=!1;for(const t in s)this.functions[t]=s[t]}addFunction(t,e){this.functions[t]=e}addInfo(t){this.verbose&&this.messages.push({type:"message",level:"info",message:t})}addWarning(t){this.messages.push({type:"message",level:"warning",message:t})}addError(t){this.messages.push({type:"message",level:"error",message:t})}execute(t,e){const n=le.parse(t);let s;this.messages=[];for(const r of n)switch(r.type){case"assignment":case"def":case"sequence":s=this.executeExpression(r,e,this.symbolTable);break;default:return this.addError(`unknown statement type: ${r.type}`),Ae}return s}executeExpression(t,e,n){const s=s=>{const r=this.executeExpression(t.left,e,n);if(r!==Ae&&"number"===typeof r){const i=this.executeExpression(t.right,e,n);if(i!==Ae&&"number"===typeof i)return s(r,i)}return Ae};switch(t.type){case"assignment":{const s=this.executeExpression(t.value,e,n);return s===Ae?(this.addError(`Unable to evaluate assignment value for ${t.name}`),Ae):(n[t.name]=s,s)}case"def":return void(n[t.name]=t.value);case"get-value":if(t.name in n){const s=n[t.name];if(Oe(s)&&"sequence"===s.type){const r=this.executeExpression(s,e,n);return r===Ae?(this.addError(`Unable to evaluate sequence ${t.name}`),Ae):r}return s}return t.name in this.functions?this.invokeFunction(t.name,[e]):(this.addError(`Tried to access unbound symbol: ${t.name}`),Ae);case"get-property":{const s=this.executeExpression(t.left,e,n);return Oe(s)?s[t.right]:Ae}case"get-index":{const{left:s,right:r}=t,i=this.executeExpression(s,e,n);if(Array.isArray(i)){const t=r<0?i.length+r:r;return 0<=t&&t<i.length?i[t]:Ae}return Ae}case"get-structure":return e;case"sequences":{let s=Ae;for(const r of t.sequences){const t=Object.create(n);if(s=this.executeExpression(r,e,t),s!==Ae){Object.assign(n,t);break}}return s}case"sequence":{let s=e;for(const e of t.steps)if(s="pattern"===e.type?this.executePattern(e,s,n):this.executeExpression(e,s,n),s===Ae)return Ae;return s}case"add":return s((t,e)=>t+e);case"map":{const[s,r]=t.value,i=this.executeExpression(s,e,n);if(i!==Ae){if(!1===Array.isArray(i))return this.addError("First argument of map must evaluate to an array"),Ae;const t=Object.create(n);return i.map(e=>this.executeExpression(r,e,t))}return Ae}case"patterns":{let s=Ae;for(const r of t.patterns){const t=Object.create(n);if(s=this.executePattern(r,e,t),s!==Ae){Object.assign(n,t);break}}return s}case"subtract":return s((t,e)=>t-e);case"multiply":return s((t,e)=>t*e);case"divide":return s((t,e)=>t/e);case"invoke":{const s=t.args.reduce((t,s)=>{if("spread"===s.type){const r=this.executeExpression(s.expression,e,n);Array.isArray(r)?t=t.concat(r):t.push(r)}else t.push(this.executeExpression(s,e,n));return t},[]);return t.name in this.functions?this.invokeFunction(t.name,s):(this.addError(`Tried to access unbound symbol: ${t.name}`),Ae)}case"array":{const s=[];for(const r of t.value)if("assignment"===r.type)this.executeExpression(r,e,n);else{const t=this.executeExpression(r,e,n);if(t===Ae)return Ae;s.push(t)}return s}case"boolean":case"null":case"number":case"string":case"undefined":return t.value;case"object":return this.executeObjectExpression(t,e,n);default:return this.addError(`Unrecognized expression type: '${t.type}'`),Ae}}executeObjectExpression(t,e,n){const s=Object.create(n),r={};for(const i of t.value)switch(i.type){case"property":{const t=this.executeExpression(i.name,e,s);if(t===Ae)return Ae;if("string"!==typeof t)return this.addError(`Property names must be string types: ${t}`),Ae;const a=null!==i.value?this.executeExpression(i.value,e,s):n[t];if(a===Ae)return this.addError(`Unable to evaluate value for property ${t}`),Ae;r[t]=a;break}case"assignment":if(this.executeExpression(i,e,s)===Ae)return Ae;break;default:return this.addError(`Unrecognized object expression element type: ${i.type}`),Ae}return r}executePattern(t,e,n){switch(t.patternType){case"any":return this.assign(n,t.assignTo,e),e;case"array":return Array.isArray(e)?(this.assign(n,t.assignTo,e),e):Ae;case"array-pattern":return this.executeArrayPattern(t,e,n)===Ae?Ae:n;case"boolean":return"boolean"!==typeof e||null!==t.value&&t.value!==e?Ae:(this.assign(n,t.assignTo,e),e);case"null":return null===e?(this.assign(n,t.assignTo,e),e):Ae;case"number":return"number"!==typeof e||null!==t.value&&t.value!==e?Ae:(this.assign(n,t.assignTo,e),e);case"object":return Oe(e)?(this.assign(n,t.assignTo,e),e):Ae;case"object-pattern":{if(!1===Oe(e))return Ae;const s={};for(const r of t.value){const{name:t,pattern:i,assignTo:a}=r;if(!(t in e))return Ae;{const r=this.executePattern(i,e[t],n);if(r===Ae)return Ae;this.assign(n,a,e[t]),this.assign(s,a,r)}}return this.assign(n,t.assignTo,e),s}case"reference":if(t.value in this.patterns){const s=this.patterns[t.value],r=this.executePattern(s,e,n);return r!==Ae&&this.assign(n,t.assignTo,r),r}return Ae;case"string":return"string"!==typeof e||null!==t.value&&t.value!==e?Ae:(this.assign(n,t.assignTo,e),e);case"undefined":return void 0===e?(this.assign(n,t.assignTo,e),e):Ae;default:throw new TypeError(`unrecognized pattern type: '${t.type}'`)}}executeArrayPattern(t,e,n){if(!1===Array.isArray(e))return Ae;let s=[],r=0;for(const i of t.value){const t=this.executeArrayPatternElement(i,r,e,n);if(t===Ae)return Ae;s=s.concat(t),r+=t.length}return r===e.length?(this.assign(n,t.assignTo,e),s):Ae}executeArrayPatternElement(t,e,n,s){let r=[];switch(t.type){case"element":{const i=this.executeArrayElementPattern(t,e,n,s);if(i===Ae)return Ae;r=r.concat(i),e+=i.length;break}case"element-group":{const i=this.executeArrayElementGroupPattern(t,e,n,s);if(i===Ae)return Ae;r=r.concat(i),e+=i.length;break}default:return this.addError(`Unrecognized array pattern element type: '${t.type}'`),Ae}return r}executeArrayElementPattern(t,e,n,s){const{pattern:r,range:{start:i,stop:a}}=t,o=[];for(let c=0;c<a;c++){const u=e+c,h=u<n.length?this.executePattern(r,n[u],s):Ae;if(h===Ae){if(c>=i)break;return Ae}a>1?this.pushAssign(s,t.assignTo,h):this.assign(s,t.assignTo,h),o.push(h)}return o}executeArrayElementGroupPattern(t,e,n,s){const{elements:r,range:{start:i,stop:a}}=t;let o=[];for(let c=0;c<a;c++){let u=[];for(const t of r){const r=Object.create(s),i=this.executeArrayPatternElement(t,e,n,r);if(i===Ae){u=Ae;break}null!==t.assignTo&&void 0!==t.assignTo&&t.assignTo in r&&(a>1?this.pushAssign(s,t.assignTo,r[t.assignTo]):this.assign(s,t.assignTo,r[t.assignTo])),o=o.concat(i),e+=i.length,u=u.concat(i)}if(u===Ae){if(c>=i){if(0===c){this.assign(s,t.assignTo,[]);for(const t of r)this.assign(s,t.assignTo,[])}return o}return Ae}a>1?this.pushAssign(s,t.assignTo,u):this.assign(s,t.assignTo,u)}return o}invokeFunction(t,e){return t in this.functions?this.functions[t](...e):Ae}assign(t,e,n){null!==e&&void 0!==e&&(t.hasOwnProperty(e)&&this.addWarning(`Overwriting ${e} with value: ${n}`),t[e]=n)}pushAssign(t,e,n){if(null!==e&&void 0!==e){const s=t.hasOwnProperty(e)?t[e]:[];Array.isArray(s)?(s.push(n),t[e]=s):this.addWarning(`Unable to push to ${e} because it is not an array: ${s}`)}}};Le.execute('\ndef Center =\n    patterns {\n        { center: { x: number as x, y: number as y } },\n        { center: [ number as x, number as y ] },\n        { cx: number as x, cy: number as y },\n        { centerX: number as x, centerY: number as y }\n    } |> Point2D(x, y);\n\ndef Radii =\n    patterns {\n        { radii: { x: number as rx, y: number as ry } },\n        { radii: [ number as rx, number as ry ] },\n        { rx: number as rx, ry: number as ry },\n        { radiusX: number as rx, radiusY: number as ry }\n    } |> { "rx", "ry" };\n\ndef P1 =\n    patterns {\n        { p1: { x: number as x, y: number as y } },\n        { p1: [ number as x, number as y ] },\n        { p1x: number as x, p1y: number as y }\n    } |> Point2D(x, y);\n        \ndef P2 =\n    patterns {\n        { p1: { x: number as x, y: number as y } },\n        { p1: [ number as x, number as y ] },\n        { p1x: number as x, p1y: number as y }\n    } |> Point2D(x, y);\n        \ndef P3 =\n    patterns {\n        { p1: { x: number as x, y: number as y } },\n        { p1: [ number as x, number as y ] },\n        { p1x: number as x, p1y: number as y }\n    } |> Point2D(x, y);\n        \ndef P4 =\n    patterns {\n        { p1: { x: number as x, y: number as y } },\n        { p1: [ number as x, number as y ] },\n        { p1x: number as x, p1y: number as y }\n    } |> Point2D(x, y);\n\n            \ndef Arc = {\n    let radii = Radii,\n\n    "center": Center,\n    "radiusX": radii.rx,\n    "radiusY": radii.ry,\n    "startRadians": =~ number,\n    "endRadians": =~ number\n};\n\ndef ArcArgs = {\n    let elements =\n        patterns {\n            [ number as centerX, number as centerY, number as radiusX, number as radiusY, number as startRadians, number as endRadians ],\n            [ { x: number as centerX, y: number as centerY }, number as radiusX, number as radiusY, number as startRadians, number as endRadians ]\n        } |> { "centerX", "centerY", "radiusX", "radiusY", "startRadians", "endRadians" },\n    \n    "center": Point2D(elements.centerX, elements.centerY),\n    "radiusX": elements.radiusX,\n    "radiusY": elements.radiusY,\n    "startRadians": elements.startRadians,\n    "endRadians": elements.endRadians\n};\n\ndef Bezier2 = {\n    "p1": P1,\n    "p2": P2,\n    "p3": P3\n};\n\ndef Bezier2Args = {\n    let elements =\n        patterns {\n            [ number as p1x, number as p1y, number as p2x, number as p2y, number as p3x, number as p3y ],\n            [ { x: number as p1x, y: number as p1y }, { x: number as p2x, y: number as p2y }, { x: number as p3x, y: number as p3y }]\n        } |> { "p1x", "p1y", "p2x", "p2y", "p3x", "p3y" },\n    \n    "p1": Point2D(elements.p1x, elements.p1y),\n    "p2": Point2D(elements.p2x, elements.p2y),\n    "p3": Point2D(elements.p3x, elements.p3y)\n};\n\ndef Bezier3 = {\n    "p1": P1,\n    "p2": P2,\n    "p3": P3,\n    "p4": P4\n};\n\ndef Bezier3Args = {\n    let elements =\n        patterns {\n            [ number as p1x, number as p1y, number as p2x, number as p2y, number as p3x, number as p3y, number as p4x, number as p4y ],\n            [ { x: number as p1x, y: number as p1y }, { x: number as p2x, y: number as p2y }, { x: number as p3x, y: number as p3y }, { x: number as p4x, y: number as p4y }]\n        } |> { "p1x", "p1y", "p2x", "p2y", "p3x", "p3y", "p4x", "p4y" },\n    \n    "p1": Point2D(elements.p1x, elements.p1y),\n    "p2": Point2D(elements.p2x, elements.p2y),\n    "p3": Point2D(elements.p3x, elements.p3y),\n    "p4": Point2D(elements.p4x, elements.p4y)\n};\n\ndef Circle = {\n    "center": Center,\n    "radius":\n        patterns {\n            { r: number as radius},\n            { radius: number as radius }\n        } |> radius\n};\n\ndef CircleArgs = {\n    let elements =\n        patterns {\n            [ number as centerX, number as centerY, number as radius ],\n            [ { x: number as centerX, y: number as centerY }, number as radius ]\n        } |> { "centerX", "centerY", "radius" },\n    \n    "center": Point2D(elements.centerX, elements.centerY),\n    "radius": elements.radius\n};\n\ndef Ellipse = {\n    let radii = Radii,\n\n    "center": Center,\n    "radiusX": radii.rx,\n    "radiusY": radii.ry\n};\n\ndef EllipseArgs = {\n    let elements =\n       patterns {\n            [ number as centerX, number as centerY, number as radiusX, number as radiusY ],\n            [ { x: number as centerX, y: number as centerY }, number as radiusX, number as radiusY ]\n        } |> { "centerX", "centerY", "radiusX", "radiusY" },\n    \n    "center": Point2D(elements.centerX, elements.centerY),\n    "radiusX": elements.radiusX,\n    "radiusY": elements.radiusY\n};\n\ndef Line = {\n    "p1": P1,\n    "p2": P2\n};\n\ndef LineArgs = {\n    let elements =\n        patterns {\n            [ number as p1x, number as p1y, number as p2x, number as p2y ],\n            [ { x: number as p1x, y: number as p1y }, { x: number as p2x, y: number as p2y } ]\n        } |> { "p1x", "p1y", "p2x", "p2y" },\n        \n    "p1": Point2D(elements.p1x, elements.p1y),\n    "p2": Point2D(elements.p2x, elements.p2y)\n};\n\ndef Path = {\n    "segments":\n        =~ { d: string as data } |> PathData(data)\n};\n\ndef PathArgs = {\n    "segments":\n        =~ string as data |> PathData(data)\n};\n\ndef Polygon = {\n    "points":\n        sequences {\n            =~ { points: [ (number, number); 0.. as coords ] }\n            |> [ map(coords, Point2D(...$)) ],\n\n            =~ { points: [ { x: number, y: number }; 0.. ] as points }\n            |> [ map(points, Point2D($.x, $.y)) ]\n        }\n};\n\ndef PolygonArgs = {\n    "points":\n        sequences {\n            =~ [ (number, number); 0.. as coords ]\n            |> [ map(coords, Point2D(...$)) ],\n\n            =~ [ { x: number, y: number }; 0.. ] as points\n            |> [ map(points, Point2D($.x, $.y)) ]\n        }\n};\n\ndef Polyline = {\n    "points":\n        sequences {\n            =~ { points: [ (number, number); 0.. as coords ] }\n            |> [ map(coords, Point2D(...$)) ],\n\n            =~ { points: [ { x: number, y: number }; 0.. ] as points }\n            |> [ map(points, Point2D($.x, $.y)) ]\n        }\n};\n\ndef PolylineArgs = {\n    "points":\n        sequences {\n            =~ [ (number, number); 0.. as coords ]\n            |> [ map(coords, Point2D(...$)) ],\n\n            =~ [ { x: number, y: number }; 0.. ] as points\n            |> [ map(points, Point2D($.x, $.y)) ]\n        }\n};\n\ndef Rectangle = {\n    let topLeft =\n        patterns {\n            { topLeft: { x: number as x, y: number as y } },\n            { topLeft: [ number as x, number as y ] },\n            { x: number as x, y: number as y },\n            { top: number as x, left: number as y }\n        } |> { "x", "y" },\n\n    "topLeft":\n        Point2D(topLeft.x, topLeft.y),\n\n    "bottomRight":\n        sequences {\n            patterns {\n                { bottomRight: { x: number as x, y: number as y } },\n                { bottomRight: [ number as x, number as y ] }\n            } |> Point2D(x, y),\n            patterns {\n                { w: number as w, h: number as h },\n                { width: number as w, height: number as h },\n                { size: { x: number as w, y: number as h } },\n                { size: [ number as w, number as h ] }\n            } |> Point2D(topLeft.x + w, topLeft.y + h)\n        },\n\n    "rx":\n        sequences {\n            =~ { rx: number as rx } |> rx,\n            =~ any |> 0\n        },\n    "ry":\n        sequences {\n            =~ { ry: number as ry } |> ry,\n            =~ any |> 0\n        }\n};\n\ndef RectangleArgs = {\n    let elements =\n        patterns {\n            [ number as x, number as y, number as width, number as height ],\n            [ number as x, number as y, number as width, number as height, number as rx, number as ry ],\n            [ { x: number as x, y: number as y }, { x: number as width, y: number as height } ],\n            [ { x: number as x, y: number as y }, { x: number as width, y: number as height }, { rx: number as rx, ry: number as ry } ],\n            [ { x: number as x, y: number as y }, { x: number as width, y: number as height }, { radiusX: number as rx, radiusY: number as ry } ]\n        } |> { "x", "y", "width", "height", "rx", "ry" },\n\n    "topLeft": Point2D(elements.x, elements.y),\n    "bottomRight": Point2D(elements.x + elements.width, elements.y + elements.height),\n    "rx": elements.rx,\n    "ry": elements.ry\n}\n'),Le.addFunction("Point2D",(t,e)=>new re(t,e)),Le.addFunction("PathData",t=>{const e=new Xe,n=new Ye(Se);return e.setHandler(n),e.parseData(t),n.shapes});const De=2*Math.PI,Be=new ae(1,0);function ze(t){return null===t||void 0===t}function qe(t){const e=t%De;return e<0?e+De:e}function Ue(t){const e=t.slice();return e.push(t[0]),e}class Fe{constructor(t){this.init(t)}init(t){this.status=t,this.points=[]}static intersect(t,e){let n;if(ze(t)||ze(e))n=new Fe("No Intersection");else if("Path"===t.name)n=Fe.intersectPathShape(t,e);else if("Path"===e.name)n=Fe.intersectPathShape(e,t);else if("Arc"===t.name)n=Fe.intersectArcShape(t,e);else if("Arc"===e.name)n=Fe.intersectArcShape(e,t);else{let s,r;if(t.name<e.name?(s="intersect"+t.name+e.name,r=t.args.concat(e.args)):(s="intersect"+e.name+t.name,r=e.args.concat(t.args)),!(s in Fe))throw new TypeError("Intersection not available: "+s);n=Fe[s].apply(null,r)}return n}static intersectPathShape(t,e){const n=new Fe("No Intersection");for(const s of t.args){const t=Fe.intersect(s,e);n.appendPoints(t.points)}return n.points.length>0&&(n.status="Intersection"),n}static intersectArcShape(t,e){const[n,s,r,i,a]=t.args,o=new Se(Se.ELLIPSE,[n,s,r]);return function(t,e,n,s,r,i){if(0===t.points.length)return t;const a=new Fe("No Intersection"),o=qe(r);let c=qe(i);c<o&&(c+=De);for(const u of t.points){const t=qe(Be.angleBetween(ae.fromPoints(e,u)));o<=t&&t<=c&&a.appendPoint(u)}return a.points.length>0&&(a.status="Intersection"),a}(Fe.intersect(o,e),n,0,0,i,a)}static intersectBezier2Bezier2(t,e,n,s,r,i){let a,o;const c=new Fe("No Intersection");a=e.multiply(-2);const u=t.add(a.add(n));a=t.multiply(-2),o=e.multiply(2);const h=a.add(o),l=new re(t.x,t.y);a=r.multiply(-2);const p=s.add(a.add(i));a=s.multiply(-2),o=r.multiply(2);const y=a.add(o),f=new re(s.x,s.y);a=u.x*h.y-h.x*u.y,o=p.x*h.y-h.x*p.y;const x=y.x*h.y-h.x*y.y,d=h.x*(l.y-f.y)+h.y*(-l.x+f.x),m=p.x*u.y-u.x*p.y,b=y.x*u.y-u.x*y.y,g=u.x*(l.y-f.y)+u.y*(-l.x+f.x),v=new he(-m*m,-2*m*b,a*o-b*b-2*m*g,a*x-2*b*g,a*d-g*g).getRoots();for(const w of v)if(0<=w&&w<=1){const t=new he(u.x,h.x,l.x-f.x-w*y.x-w*w*p.x);t.simplifyEquals();const e=t.getRoots(),n=new he(u.y,h.y,l.y-f.y-w*y.y-w*w*p.y);n.simplifyEquals();const s=n.getRoots();if(e.length>0&&s.length>0){const t=1e-4;t:for(const n of e)if(0<=n&&n<=1)for(let e=0;e<s.length;e++)if(Math.abs(n-s[e])<t){c.points.push(p.multiply(w*w).add(y.multiply(w).add(f)));break t}}}return c.points.length>0&&(c.status="Intersection"),c}static intersectBezier2Bezier3(t,e,n,s,r,i,a){let o,c,u,h;const l=new Fe("No Intersection");o=e.multiply(-2);const p=t.add(o.add(n));o=t.multiply(-2),c=e.multiply(2);const y=o.add(c),f=new re(t.x,t.y);o=s.multiply(-1),c=r.multiply(3),u=i.multiply(-3),h=o.add(c.add(u.add(a)));const x=new re(h.x,h.y);o=s.multiply(3),c=r.multiply(-6),u=i.multiply(3),h=o.add(c.add(u));const d=new re(h.x,h.y);o=s.multiply(-3),c=r.multiply(3),u=o.add(c);const m=new re(u.x,u.y),b=new re(s.x,s.y),g=f.x*f.x,v=f.y*f.y,w=y.x*y.x,E=y.y*y.y,M=p.x*p.x,P=p.y*p.y,A=b.x*b.x,O=b.y*b.y,R=m.x*m.x,k=m.y*m.y,_=d.x*d.x,T=d.y*d.y,j=x.x*x.x,X=x.y*x.y,I=new he(-2*p.x*p.y*x.x*x.y+M*X+P*j,-2*p.x*p.y*d.x*x.y-2*p.x*p.y*d.y*x.x+2*P*d.x*x.x+2*M*d.y*x.y,-2*p.x*m.x*p.y*x.y-2*p.x*p.y*m.y*x.x-2*p.x*p.y*d.x*d.y+2*m.x*P*x.x+P*_+M*(2*m.y*x.y+T),2*f.x*p.x*p.y*x.y+2*f.y*p.x*p.y*x.x+y.x*y.y*p.x*x.y+y.x*y.y*p.y*x.x-2*b.x*p.x*p.y*x.y-2*p.x*b.y*p.y*x.x-2*p.x*m.x*p.y*d.y-2*p.x*p.y*m.y*d.x-2*f.x*P*x.x-2*f.y*M*x.y+2*b.x*P*x.x+2*m.x*P*d.x-E*p.x*x.x-w*p.y*x.y+M*(2*b.y*x.y+2*m.y*d.y),2*f.x*p.x*p.y*d.y+2*f.y*p.x*p.y*d.x+y.x*y.y*p.x*d.y+y.x*y.y*p.y*d.x-2*b.x*p.x*p.y*d.y-2*p.x*b.y*p.y*d.x-2*p.x*m.x*p.y*m.y-2*f.x*P*d.x-2*f.y*M*d.y+2*b.x*P*d.x-E*p.x*d.x-w*p.y*d.y+R*P+M*(2*b.y*d.y+k),2*f.x*p.x*p.y*m.y+2*f.y*p.x*m.x*p.y+y.x*y.y*p.x*m.y+y.x*y.y*m.x*p.y-2*b.x*p.x*p.y*m.y-2*p.x*b.y*m.x*p.y-2*f.x*m.x*P-2*f.y*M*m.y+2*b.x*m.x*P-E*p.x*m.x-w*p.y*m.y+2*M*b.y*m.y,-2*f.x*f.y*p.x*p.y-f.x*y.x*y.y*p.y-f.y*y.x*y.y*p.x+2*f.x*p.x*b.y*p.y+2*f.y*b.x*p.x*p.y+y.x*b.x*y.y*p.y+y.x*y.y*p.x*b.y-2*b.x*p.x*b.y*p.y-2*f.x*b.x*P+f.x*E*p.x+f.y*w*p.y-2*f.y*M*b.y-b.x*E*p.x-w*b.y*p.y+g*P+v*M+A*P+M*O).getRootsInInterval(0,1);for(const N of I){const t=new he(p.x,y.x,f.x-b.x-N*m.x-N*N*d.x-N*N*N*x.x).getRoots(),e=new he(p.y,y.y,f.y-b.y-N*m.y-N*N*d.y-N*N*N*x.y).getRoots();if(t.length>0&&e.length>0){const n=1e-4;t:for(const s of t)if(0<=s&&s<=1)for(let t=0;t<e.length;t++)if(Math.abs(s-e[t])<n){l.points.push(x.multiply(N*N*N).add(d.multiply(N*N).add(m.multiply(N).add(b))));break t}}}return l.points.length>0&&(l.status="Intersection"),l}static intersectBezier2Circle(t,e,n,s,r){return Fe.intersectBezier2Ellipse(t,e,n,s,r,r)}static intersectBezier2Ellipse(t,e,n,s,r,i){let a;const o=new Fe("No Intersection");a=e.multiply(-2);const c=t.add(a.add(n));a=t.multiply(-2);const u=e.multiply(2),h=a.add(u),l=new re(t.x,t.y),p=r*r,y=i*i,f=new he(y*c.x*c.x+p*c.y*c.y,2*(y*c.x*h.x+p*c.y*h.y),y*(2*c.x*l.x+h.x*h.x)+p*(2*c.y*l.y+h.y*h.y)-2*(y*s.x*c.x+p*s.y*c.y),2*(y*h.x*(l.x-s.x)+p*h.y*(l.y-s.y)),y*(l.x*l.x+s.x*s.x)+p*(l.y*l.y+s.y*s.y)-2*(y*s.x*l.x+p*s.y*l.y)-p*y).getRoots();for(const x of f)0<=x&&x<=1&&o.points.push(c.multiply(x*x).add(h.multiply(x).add(l)));return o.points.length>0&&(o.status="Intersection"),o}static intersectBezier2Line(t,e,n,s,r){let i;const a=s.min(r),o=s.max(r),c=new Fe("No Intersection");i=e.multiply(-2);const u=t.add(i.add(n));i=t.multiply(-2);const h=e.multiply(2),l=i.add(h),p=new re(t.x,t.y),y=new ae(s.y-r.y,r.x-s.x),f=s.x*r.y-r.x*s.y,x=new he(y.dot(u),y.dot(l),y.dot(p)+f).getRoots();for(const d of x)if(0<=d&&d<=1){const i=t.lerp(e,d),u=e.lerp(n,d),h=i.lerp(u,d);s.x===r.x?a.y<=h.y&&h.y<=o.y&&(c.status="Intersection",c.appendPoint(h)):s.y===r.y?a.x<=h.x&&h.x<=o.x&&(c.status="Intersection",c.appendPoint(h)):a.x<=h.x&&h.x<=o.x&&a.y<=h.y&&h.y<=o.y&&(c.status="Intersection",c.appendPoint(h))}return c}static intersectBezier2Polygon(t,e,n,s){return Fe.intersectBezier2Polyline(t,e,n,Ue(s))}static intersectBezier2Polyline(t,e,n,s){const r=new Fe("No Intersection"),{length:i}=s;for(let a=0;a<i-1;a++){const i=s[a],o=s[a+1],c=Fe.intersectBezier2Line(t,e,n,i,o);r.appendPoints(c.points)}return r.points.length>0&&(r.status="Intersection"),r}static intersectBezier2Rectangle(t,e,n,s,r){const i=s.min(r),a=s.max(r),o=new re(a.x,i.y),c=new re(i.x,a.y),u=Fe.intersectBezier2Line(t,e,n,i,o),h=Fe.intersectBezier2Line(t,e,n,o,a),l=Fe.intersectBezier2Line(t,e,n,a,c),p=Fe.intersectBezier2Line(t,e,n,c,i),y=new Fe("No Intersection");return y.appendPoints(u.points),y.appendPoints(h.points),y.appendPoints(l.points),y.appendPoints(p.points),y.points.length>0&&(y.status="Intersection"),y}static intersectBezier3Bezier3(t,e,n,s,r,i,a,o){let c,u,h,l;const p=new Fe("No Intersection");c=t.multiply(-1),u=e.multiply(3),h=n.multiply(-3),l=c.add(u.add(h.add(s)));const y=new re(l.x,l.y);c=t.multiply(3),u=e.multiply(-6),h=n.multiply(3),l=c.add(u.add(h));const f=new re(l.x,l.y);c=t.multiply(-3),u=e.multiply(3),h=c.add(u);const x=new re(h.x,h.y),d=new re(t.x,t.y);c=r.multiply(-1),u=i.multiply(3),h=a.multiply(-3),l=c.add(u.add(h.add(o)));const m=new re(l.x,l.y);c=r.multiply(3),u=i.multiply(-6),h=a.multiply(3),l=c.add(u.add(h));const b=new re(l.x,l.y);c=r.multiply(-3),u=i.multiply(3),h=c.add(u);const g=new re(h.x,h.y),v=new re(r.x,r.y);c=y.x*f.y-f.x*y.y,u=y.x*x.y-x.x*y.y;const w=y.x*d.y-d.x*y.y+v.x*y.y-y.x*v.y,E=g.x*y.y-y.x*g.y,M=b.x*y.y-y.x*b.y,P=m.x*y.y-y.x*m.y;l=y.x*x.y-x.x*y.y;const A=y.x*d.y+f.x*x.y-x.x*f.y-d.x*y.y+v.x*y.y-y.x*v.y,O=g.x*y.y-y.x*g.y,R=b.x*y.y-y.x*b.y,k=m.x*y.y-y.x*m.y,_=f.x*d.y-d.x*f.y+v.x*f.y-f.x*v.y,T=g.x*f.y-f.x*g.y,j=b.x*f.y-f.x*b.y,X=m.x*f.y-f.x*m.y,I=y.x*d.y-d.x*y.y+v.x*y.y-y.x*v.y,N=g.x*y.y-y.x*g.y,Y=b.x*y.y-y.x*b.y,C=m.x*y.y-y.x*m.y,S=f.x*d.y-d.x*f.y+v.x*f.y-f.x*v.y,$=g.x*f.y-f.x*g.y,L=b.x*f.y-f.x*b.y,D=m.x*f.y-f.x*m.y,B=x.x*d.y-d.x*x.y+v.x*x.y-x.x*v.y,z=g.x*x.y-x.x*g.y,q=b.x*x.y-x.x*b.y,U=m.x*x.y-x.x*m.y,F=new he(-P*k*C,-P*k*Y-P*R*C-M*k*C,-P*k*N-P*R*Y-M*k*Y-P*O*C-M*R*C-E*k*C,-P*k*I-P*R*N-M*k*N-P*O*Y-M*R*Y-E*k*Y-P*A*C-M*O*C-E*R*C-w*k*C+u*X*C+P*l*D-c*X*D+c*k*U,-P*R*I-M*k*I-P*O*N-M*R*N-E*k*N-P*A*Y-M*O*Y-E*R*Y-w*k*Y+u*X*Y-M*A*C-E*O*C-w*R*C+u*j*C+P*l*L-c*X*L+M*l*D-c*j*D+c*k*q+c*R*U,-P*O*I-M*R*I-E*k*I-P*A*N-M*O*N-E*R*N-w*k*N+u*X*N-M*A*Y-E*O*Y-w*R*Y+u*j*Y-E*A*C-w*O*C+u*T*C+P*l*$-c*X*$+M*l*L-c*j*L+E*l*D-c*T*D+c*k*z+c*R*q+c*O*U,-P*A*I-M*O*I-E*R*I-w*k*I+u*X*I-M*A*N-E*O*N-w*R*N+u*j*N-E*A*Y-w*O*Y+u*T*Y-w*A*C+u*_*C+P*l*S-c*X*S+M*l*$-c*j*$+E*l*L-c*T*L+w*l*D-c*_*D+c*k*B+c*R*z+c*O*q-u*l*U+c*A*U,-M*A*I-E*O*I-w*R*I+u*j*I-E*A*N-w*O*N+u*T*N-w*A*Y+u*_*Y+M*l*S-c*j*S+E*l*$-c*T*$+w*l*L-c*_*L+c*R*B+c*O*z-u*l*q+c*A*q,-E*A*I-w*O*I+u*T*I-w*A*N+u*_*N+E*l*S-c*T*S+w*l*$-c*_*$+c*O*B-u*l*z+c*A*z,-w*A*I+u*_*I+w*l*S-c*_*S-u*l*B+c*A*B);F.simplifyEquals();const G=F.getRootsInInterval(0,1);for(const V of G){const t=new he(y.x,f.x,x.x,d.x-v.x-V*g.x-V*V*b.x-V*V*V*m.x);t.simplifyEquals();const e=t.getRoots(),n=new he(y.y,f.y,x.y,d.y-v.y-V*g.y-V*V*b.y-V*V*V*m.y);n.simplifyEquals();const s=n.getRoots();if(e.length>0&&s.length>0){const t=1e-4;t:for(const n of e)if(0<=n&&n<=1)for(let e=0;e<s.length;e++)if(Math.abs(n-s[e])<t){p.points.push(m.multiply(V*V*V).add(b.multiply(V*V).add(g.multiply(V).add(v))));break t}}}return p.points.length>0&&(p.status="Intersection"),p}static intersectBezier3Circle(t,e,n,s,r,i){return Fe.intersectBezier3Ellipse(t,e,n,s,r,i,i)}static intersectBezier3Ellipse(t,e,n,s,r,i,a){let o,c,u,h;const l=new Fe("No Intersection");o=t.multiply(-1),c=e.multiply(3),u=n.multiply(-3),h=o.add(c.add(u.add(s)));const p=new re(h.x,h.y);o=t.multiply(3),c=e.multiply(-6),u=n.multiply(3),h=o.add(c.add(u));const y=new re(h.x,h.y);o=t.multiply(-3),c=e.multiply(3),u=o.add(c);const f=new re(u.x,u.y),x=new re(t.x,t.y),d=i*i,m=a*a,b=new he(p.x*p.x*m+p.y*p.y*d,2*(p.x*y.x*m+p.y*y.y*d),2*(p.x*f.x*m+p.y*f.y*d)+y.x*y.x*m+y.y*y.y*d,2*p.x*m*(x.x-r.x)+2*p.y*d*(x.y-r.y)+2*(y.x*f.x*m+y.y*f.y*d),2*y.x*m*(x.x-r.x)+2*y.y*d*(x.y-r.y)+f.x*f.x*m+f.y*f.y*d,2*f.x*m*(x.x-r.x)+2*f.y*d*(x.y-r.y),x.x*x.x*m-2*x.y*r.y*d-2*x.x*r.x*m+x.y*x.y*d+r.x*r.x*m+r.y*r.y*d-d*m).getRootsInInterval(0,1);for(const g of b)l.points.push(p.multiply(g*g*g).add(y.multiply(g*g).add(f.multiply(g).add(x))));return l.points.length>0&&(l.status="Intersection"),l}static intersectBezier3Line(t,e,n,s,r,i){let a,o,c,u;const h=r.min(i),l=r.max(i),p=new Fe("No Intersection");a=t.multiply(-1),o=e.multiply(3),c=n.multiply(-3),u=a.add(o.add(c.add(s)));const y=new ae(u.x,u.y);a=t.multiply(3),o=e.multiply(-6),c=n.multiply(3),u=a.add(o.add(c));const f=new ae(u.x,u.y);a=t.multiply(-3),o=e.multiply(3),c=a.add(o);const x=new ae(c.x,c.y),d=new ae(t.x,t.y),m=new ae(r.y-i.y,i.x-r.x),b=r.x*i.y-i.x*r.y,g=new he(m.dot(y),m.dot(f),m.dot(x),m.dot(d)+b).getRoots();for(const v of g)if(0<=v&&v<=1){const a=t.lerp(e,v),o=e.lerp(n,v),c=n.lerp(s,v),u=a.lerp(o,v),y=o.lerp(c,v),f=u.lerp(y,v);r.x===i.x?h.y<=f.y&&f.y<=l.y&&(p.status="Intersection",p.appendPoint(f)):r.y===i.y?h.x<=f.x&&f.x<=l.x&&(p.status="Intersection",p.appendPoint(f)):h.x<=f.x&&f.x<=l.x&&h.y<=f.y&&f.y<=l.y&&(p.status="Intersection",p.appendPoint(f))}return p}static intersectBezier3Polygon(t,e,n,s,r){return Fe.intersectBezier3Polyline(t,e,n,s,Ue(r))}static intersectBezier3Polyline(t,e,n,s,r){const i=new Fe("No Intersection"),{length:a}=r;for(let o=0;o<a-1;o++){const a=r[o],c=r[o+1],u=Fe.intersectBezier3Line(t,e,n,s,a,c);i.appendPoints(u.points)}return i.points.length>0&&(i.status="Intersection"),i}static intersectBezier3Rectangle(t,e,n,s,r,i){const a=r.min(i),o=r.max(i),c=new re(o.x,a.y),u=new re(a.x,o.y),h=Fe.intersectBezier3Line(t,e,n,s,a,c),l=Fe.intersectBezier3Line(t,e,n,s,c,o),p=Fe.intersectBezier3Line(t,e,n,s,o,u),y=Fe.intersectBezier3Line(t,e,n,s,u,a),f=new Fe("No Intersection");return f.appendPoints(h.points),f.appendPoints(l.points),f.appendPoints(p.points),f.appendPoints(y.points),f.points.length>0&&(f.status="Intersection"),f}static intersectCircleCircle(t,e,n,s){let r;const i=e+s,a=Math.abs(e-s),o=t.distanceFrom(n);if(o>i)r=new Fe("Outside");else if(o<a)r=new Fe("Inside");else{r=new Fe("Intersection");const i=(e*e-s*s+o*o)/(2*o),a=Math.sqrt(e*e-i*i),c=t.lerp(n,i/o),u=a/o;r.points.push(new re(c.x-u*(n.y-t.y),c.y+u*(n.x-t.x))),r.points.push(new re(c.x+u*(n.y-t.y),c.y-u*(n.x-t.x)))}return r}static intersectCircleEllipse(t,e,n,s,r){return Fe.intersectEllipseEllipse(t,e,e,n,s,r)}static intersectCircleLine(t,e,n,s){let r;const i=(s.x-n.x)*(s.x-n.x)+(s.y-n.y)*(s.y-n.y),a=2*((s.x-n.x)*(n.x-t.x)+(s.y-n.y)*(n.y-t.y)),o=a*a-4*i*(t.x*t.x+t.y*t.y+n.x*n.x+n.y*n.y-2*(t.x*n.x+t.y*n.y)-e*e);if(o<0)r=new Fe("Outside");else if(0===o)r=new Fe("Tangent");else{const t=Math.sqrt(o),e=(-a+t)/(2*i),c=(-a-t)/(2*i);(e<0||e>1)&&(c<0||c>1)?r=new Fe(e<0&&c<0||e>1&&c>1?"Outside":"Inside"):(r=new Fe("Intersection"),0<=e&&e<=1&&r.points.push(n.lerp(s,e)),0<=c&&c<=1&&r.points.push(n.lerp(s,c)))}return r}static intersectCirclePolygon(t,e,n){return Fe.intersectCirclePolyline(t,e,Ue(n))}static intersectCirclePolyline(t,e,n){const s=new Fe("No Intersection"),{length:r}=n;let i;for(let a=0;a<r-1;a++){const r=n[a],o=n[a+1];i=Fe.intersectCircleLine(t,e,r,o),s.appendPoints(i.points)}return s.points.length>0?s.status="Intersection":s.status=i.status,s}static intersectCircleRectangle(t,e,n,s){const r=n.min(s),i=n.max(s),a=new re(i.x,r.y),o=new re(r.x,i.y),c=Fe.intersectCircleLine(t,e,r,a),u=Fe.intersectCircleLine(t,e,a,i),h=Fe.intersectCircleLine(t,e,i,o),l=Fe.intersectCircleLine(t,e,o,r),p=new Fe("No Intersection");return p.appendPoints(c.points),p.appendPoints(u.points),p.appendPoints(h.points),p.appendPoints(l.points),p.points.length>0?p.status="Intersection":p.status=c.status,p}static intersectEllipseEllipse(t,e,n,s,r,i){const a=[n*n,0,e*e,-2*n*n*t.x,-2*e*e*t.y,n*n*t.x*t.x+e*e*t.y*t.y-e*e*n*n],o=[i*i,0,r*r,-2*i*i*s.x,-2*r*r*s.y,i*i*s.x*s.x+r*r*s.y*s.y-r*r*i*i],c=function(t,e){const n=t[0]*e[1]-e[0]*t[1],s=t[0]*e[2]-e[0]*t[2],r=t[0]*e[3]-e[0]*t[3],i=t[0]*e[4]-e[0]*t[4],a=t[0]*e[5]-e[0]*t[5],o=t[1]*e[2]-e[1]*t[2],c=t[1]*e[4]-e[1]*t[4],u=t[1]*e[5]-e[1]*t[5],h=t[2]*e[3]-e[2]*t[3],l=t[3]*e[4]-e[3]*t[4],p=t[3]*e[5]-e[3]*t[5],y=u+l,f=c-h;return new he(n*o-s*s,n*f+r*o-2*s*i,n*y+r*f-i*i-2*s*a,n*p+r*y-2*i*a,r*p-a*a)}(a,o).getRoots(),u=.001*(a[0]*a[0]+2*a[1]*a[1]+a[2]*a[2]),h=.001*(o[0]*o[0]+2*o[1]*o[1]+o[2]*o[2]),l=new Fe("No Intersection");for(let p=0;p<c.length;p++){const t=new he(a[0],a[3]+c[p]*a[1],a[5]+c[p]*(a[4]+c[p]*a[2])).getRoots();for(let e=0;e<t.length;e++){let n=(a[0]*t[e]+a[1]*c[p]+a[3])*t[e]+(a[2]*c[p]+a[4])*c[p]+a[5];Math.abs(n)<u&&(n=(o[0]*t[e]+o[1]*c[p]+o[3])*t[e]+(o[2]*c[p]+o[4])*c[p]+o[5],Math.abs(n)<h&&l.appendPoint(new re(t[e],c[p])))}}return l.points.length>0&&(l.status="Intersection"),l}static intersectEllipseLine(t,e,n,s,r){let i;const a=new ae(s.x,s.y),o=ae.fromPoints(s,r),c=new ae(t.x,t.y),u=a.subtract(c),h=new ae(o.x/(e*e),o.y/(n*n)),l=new ae(u.x/(e*e),u.y/(n*n)),p=o.dot(h),y=o.dot(l),f=y*y-p*(t=u.dot(l)-1);if(f<0)i=new Fe("Outside");else if(f>0){const t=Math.sqrt(f),e=(-y-t)/p,n=(-y+t)/p;(e<0||1<e)&&(n<0||1<n)?i=new Fe(e<0&&n<0||e>1&&n>1?"Outside":"Inside"):(i=new Fe("Intersection"),0<=e&&e<=1&&i.appendPoint(s.lerp(r,e)),0<=n&&n<=1&&i.appendPoint(s.lerp(r,n)))}else{const t=-y/p;0<=t&&t<=1?(i=new Fe("Intersection"),i.appendPoint(s.lerp(r,t))):i=new Fe("Outside")}return i}static intersectEllipsePolygon(t,e,n,s){return Fe.intersectEllipsePolyline(t,e,n,Ue(s))}static intersectEllipsePolyline(t,e,n,s){const r=new Fe("No Intersection"),{length:i}=s;for(let a=0;a<i-1;a++){const i=s[a],o=s[a+1],c=Fe.intersectEllipseLine(t,e,n,i,o);r.appendPoints(c.points)}return r.points.length>0&&(r.status="Intersection"),r}static intersectEllipseRectangle(t,e,n,s,r){const i=s.min(r),a=s.max(r),o=new re(a.x,i.y),c=new re(i.x,a.y),u=Fe.intersectEllipseLine(t,e,n,i,o),h=Fe.intersectEllipseLine(t,e,n,o,a),l=Fe.intersectEllipseLine(t,e,n,a,c),p=Fe.intersectEllipseLine(t,e,n,c,i),y=new Fe("No Intersection");return y.appendPoints(u.points),y.appendPoints(h.points),y.appendPoints(l.points),y.appendPoints(p.points),y.points.length>0&&(y.status="Intersection"),y}static intersectLineLine(t,e,n,s){let r;const i=(s.x-n.x)*(t.y-n.y)-(s.y-n.y)*(t.x-n.x),a=(e.x-t.x)*(t.y-n.y)-(e.y-t.y)*(t.x-n.x),o=(s.y-n.y)*(e.x-t.x)-(s.x-n.x)*(e.y-t.y);if(0!==o){const n=i/o,s=a/o;0<=n&&n<=1&&0<=s&&s<=1?(r=new Fe("Intersection"),r.points.push(new re(t.x+n*(e.x-t.x),t.y+n*(e.y-t.y)))):r=new Fe("No Intersection")}else r=new Fe(0===i||0===a?"Coincident":"Parallel");return r}static intersectLinePolygon(t,e,n){return Fe.intersectLinePolyline(t,e,Ue(n))}static intersectLinePolyline(t,e,n){const s=new Fe("No Intersection"),{length:r}=n;for(let i=0;i<r-1;i++){const r=n[i],a=n[i+1],o=Fe.intersectLineLine(t,e,r,a);s.appendPoints(o.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectLineRectangle(t,e,n,s){const r=n.min(s),i=n.max(s),a=new re(i.x,r.y),o=new re(r.x,i.y),c=Fe.intersectLineLine(r,a,t,e),u=Fe.intersectLineLine(a,i,t,e),h=Fe.intersectLineLine(i,o,t,e),l=Fe.intersectLineLine(o,r,t,e),p=new Fe("No Intersection");return p.appendPoints(c.points),p.appendPoints(u.points),p.appendPoints(h.points),p.appendPoints(l.points),p.points.length>0&&(p.status="Intersection"),p}static intersectPolygonPolygon(t,e){return Fe.intersectPolylinePolyline(Ue(t),Ue(e))}static intersectPolygonPolyline(t,e){return Fe.intersectPolylinePolyline(Ue(t),e)}static intersectPolygonRectangle(t,e,n){return Fe.intersectPolylineRectangle(Ue(t),e,n)}static intersectPolylinePolyline(t,e){const n=new Fe("No Intersection"),{length:s}=t;for(let r=0;r<s-1;r++){const s=t[r],i=t[r+1],a=Fe.intersectLinePolyline(s,i,e);n.appendPoints(a.points)}return n.points.length>0&&(n.status="Intersection"),n}static intersectPolylineRectangle(t,e,n){const s=e.min(n),r=e.max(n),i=new re(r.x,s.y),a=new re(s.x,r.y),o=Fe.intersectLinePolyline(s,i,t),c=Fe.intersectLinePolyline(i,r,t),u=Fe.intersectLinePolyline(r,a,t),h=Fe.intersectLinePolyline(a,s,t),l=new Fe("No Intersection");return l.appendPoints(o.points),l.appendPoints(c.points),l.appendPoints(u.points),l.appendPoints(h.points),l.points.length>0&&(l.status="Intersection"),l}static intersectRectangleRectangle(t,e,n,s){const r=t.min(e),i=t.max(e),a=new re(i.x,r.y),o=new re(r.x,i.y),c=Fe.intersectLineRectangle(r,a,n,s),u=Fe.intersectLineRectangle(a,i,n,s),h=Fe.intersectLineRectangle(i,o,n,s),l=Fe.intersectLineRectangle(o,r,n,s),p=new Fe("No Intersection");return p.appendPoints(c.points),p.appendPoints(u.points),p.appendPoints(h.points),p.appendPoints(l.points),p.points.length>0&&(p.status="Intersection"),p}static intersectRayRay(t,e,n,s){let r;const i=(s.x-n.x)*(t.y-n.y)-(s.y-n.y)*(t.x-n.x),a=(e.x-t.x)*(t.y-n.y)-(e.y-t.y)*(t.x-n.x),o=(s.y-n.y)*(e.x-t.x)-(s.x-n.x)*(e.y-t.y);if(0!==o){const n=i/o;r=new Fe("Intersection"),r.points.push(new re(t.x+n*(e.x-t.x),t.y+n*(e.y-t.y)))}else r=new Fe(0===i||0===a?"Coincident":"Parallel");return r}appendPoint(t){this.points.push(t)}appendPoints(t){this.points=this.points.concat(t)}}var Ge=Fe;const Ve={pointInCircle:function(t,e,n){return ae.fromPoints(e,t).length()<=n},pointInEllipse:function(t,e,n,s){const r=t.subtract(e);return r.x*r.x/(n*n)+r.y*r.y/(s*s)<=1},pointInPolyline:function(t,e){const{length:n}=e;let s,r=0,i=e[0];for(let a=1;a<=n;a++){const o=e[a%n],c=Math.min(i.y,o.y),u=Math.max(i.y,o.y),h=Math.max(i.x,o.x);i.y!==o.y&&c<t.y&&t.y<=u&&t.x<=h&&(s=(t.y-i.y)*(o.x-i.x)/(o.y-i.y)+i.x,(i.x===o.x||t.x<=s)&&r++),i=o}return r%2===1}};Ve.pointInPolygon=Ve.pointInPolyline,Ve.pointInRectangle=function(t,e,n){return e.x<=t.x&&t.x<n.x&&e.y<=t.y&&t.y<n.y};var Ze=function(t,e){return Ge.intersect(t,e).points},Qe=function(t){return Se.quadraticBezier(t.src,t.c1,t.dst)},He=function(t){return Se.rectangle({top:t.x,left:t.y,width:t.width,height:t.height})},Je=function(t){return Se.ellipse(t.center.x,t.center.y,t.rx,t.ry)},Ke=function(t){return Se.line(t.src,t.dst)},We={"chop-box":{getAnchor:ne.a,intersect:{quad:function(t,e){return function(t,e){return Ze(Qe(t),He(e))}(t,e)[0]},line:function(t,e){return function(t,e){return Ze(Ke(t),He(e))}(t,e)[0]}},fromRect:function(t){return t}},"chop-ellipse":{getAnchor:ne.a,intersect:{quad:function(t,e){return function(t,e){return Ze(Qe(t),Je(e))}(t,e)[0]},line:function(t,e){return function(t,e){return Ze(Ke(t),Je(e))}(t,e)[0]}},fromRect:se.a},center:{getAnchor:ne.a},top:{getAnchor:function(t){return{x:t.x+t.width/2,y:t.y}}},right:{getAnchor:function(t){return{x:t.x+t.width,y:t.y+t.height/2}}},bottom:{getAnchor:function(t){return{x:t.x+t.width/2,y:t.y+t.height}}},left:{getAnchor:function(t){return{x:t.x,y:t.y+t.height/2}}}};function tn(t,e){var n=x()(t);if(y.a){var s=y()(t);e&&(s=s.filter((function(e){return l()(t,e).enumerable}))),n.push.apply(n,s)}return n}function en(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tn(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):u.a?o()(t,u()(n)):tn(Object(n)).forEach((function(e){i()(t,e,l()(n,e))}))}return t}var nn=function(t,e,n){var s=t.intersect,r=(0,t.fromRect)(n);return s[e.type](e,r)},sn=function(t){return void 0===t},rn=function(t,e){var n=t.connections,s=void 0===n?[]:n,r=t.boxes,i=function(t){return!Object(te.a)(t)&&!I(r[function(t){return t.port?"".concat(t.id,"/").concat(t.port):t.id}(t)])},a=function(t){var n=t.id,s=t.port;e.requestBox({id:n,port:s})};return s.reduce((function(e,n){var s=function(t){return[t.src,t.dst].filter(i)}(n);if(s.length)s.forEach(a);else if(function(t){var e=t.src,n=t.dst;return!Object(te.a)(e)||!Object(te.a)(n)}(n)){var r=function(t,e){var n=t.boxes,s=function(t){var e=t.id,s=t.port;if(s){var r=n["".concat(e,"/").concat(s)],i=n[e];return Object(ee.a)(en({},r),i)}return n[e]},r={},i=e.src,a=e.dst,o=Object(te.a)(i),c=s(i),u=We[i.anchor||"chop-box"],h=Object(te.a)(a),l=s(a),p=We[a.anchor||"chop-box"];o||(r.src=u.getAnchor(c)),h||(r.dst=p.getAnchor(l));var y=!o&&u.intersect,f=!h&&p.intersect;if(y||f){var x=(0,e.type.getShape)(en({},e,{src:r.src||i,dst:r.dst||a}));if(y){if(r.src=nn(u,x,c),sn(r.src))return;x.src=r.src}if(f){if(r.dst=nn(p,x,l),sn(r.dst))return;x.dst=r.dst}r.shape=x}return r}(t,n);r&&e.push(C(n,r))}else e.push(n);return e}),[])},an=function(t,e){return{connections:rn(t,e)}};an.deps=function(t){return[t.boxes,t.connections]};var on=an;function cn(t,e){var n=x()(t);if(y.a){var s=y()(t);e&&(s=s.filter((function(e){return l()(t,e).enumerable}))),n.push.apply(n,s)}return n}e.a=function(t){var e,n,s=t.node,r=t.normalizeConnections,a=t.connection,c=t.autoConnectionId,h=t.looms,p=t.extractBoxesFromNodes,y=t.autoBox,f=t.hideFirstRender,x=t.layout,b=t.autoViewportSize,v=t.interactive,E=t.connector,P=[];s&&P.push(M(s)),r&&P.push(R),a&&P.push((e=a,w((function(t){var n=t.connections,s=void 0===n?[]:n;return{connections:Object(m.useMemo)((function(){return s.map((function(t){return C(e,t)}))}),[s])}})))),c&&P.push(F),h&&P.push(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;return w((function(e){var n=e.connections;return{connections:$(Z,H,J(t),K(n))(n)}}))}()),p&&P.push(nt),(f||y)&&P.push(it),x&&P.push(function(t){return w((function(e){var n=Object(at.b)();return Object(m.useMemo)((function(){return t(e,n)}),t.deps(e))}))}(!0===x?on:x)),b&&P.push(w((function(t){var e=t.boxes,s=Object(m.useMemo)((function(){return vt(e)}),[e]);return wt(s,n)})));var A=$.apply(void 0,P),O=Object(m.forwardRef)((function(t,e){return Object(m.createElement)(g.a,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cn(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):u.a?o()(t,u()(n)):cn(Object(n)).forEach((function(e){i()(t,e,l()(n,e))}))}return t}({},A(t),{ref:e}))})),k=[];if(E&&k.push(E),v){var _=!0===v?void 0:v;k.push(function(t){return function(e){return function(n){var s=n.onMouseDown,r=n.onMouseMove,i=n.onMouseUp,a=Object(Mt.a)(n,["onMouseDown","onMouseMove","onMouseUp"]),o=Object(m.useRef)(null),c=qt({eventMapper:t,ref:o,onMouseDown:s,onMouseMove:r,onMouseUp:i,props:a});return Ut(e,Object(Et.a)({},c,a))}}}(_))}return y&&k.push(Wt),S.apply(void 0,k)(O)}},IUx0:function(t,e,n){var s=n("PPkd");t.exports=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:s(t,r,e[r]);return t}},LuVv:function(t,e){t.exports=function(t,e,n,s){if(!(t instanceof e)||void 0!==s&&s in t)throw TypeError(n+": incorrect invocation!");return t}},Ng5M:function(t,e,n){var s=n("N9zW"),r=n("0Sp3")("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(s.Array===t||i[r]===t)}},NlCR:function(t,e,n){var s=n("8Xl/"),r=n("6wgB"),i=n("dCrc"),a=n("gou2"),o=n("/YX7");t.exports=function(t,e){var n=1==t,c=2==t,u=3==t,h=4==t,l=6==t,p=5==t||l,y=e||o;return function(e,o,f){for(var x,d,m=i(e),b=r(m),g=s(o,f,3),v=a(b.length),w=0,E=n?y(e,v):c?y(e,0):void 0;v>w;w++)if((p||w in b)&&(d=g(x=b[w],w,m),t))if(n)E[w]=d;else if(d)switch(t){case 3:return!0;case 5:return x;case 6:return w;case 2:E.push(x)}else if(h)return!1;return l?-1:u||h?h:E}}},"O/tV":function(t,e,n){var s=n("fGh/");t.exports=function(t,e){if(!s(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},RG6p:function(t,e,n){"use strict";e.a=function(t){var e=t.x,n=t.y,s=t.width,r=t.height;return{center:{x:e+s/2,y:n+r/2},rx:s/2,ry:r/2}}},SfGT:function(t,e,n){var s=n("fGh/"),r=n("Jh4J"),i=n("0Sp3")("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),s(e)&&null===(e=e[i])&&(e=void 0)),void 0===e?Array:e}},SvME:function(t,e,n){var s=n("lBnu"),r=n("/Lgp"),i=n("T/1i"),a=n("kBaS").f;t.exports=function(t){return function(e){for(var n,o=i(e),c=r(o),u=c.length,h=0,l=[];u>h;)n=c[h++],s&&!a.call(o,n)||l.push(t?[n,o[n]]:o[n]);return l}}},VX2v:function(t,e,n){"use strict";var s=n("41F1"),r=n("/6KZ"),i=n("hYpR"),a=n("/Vl9"),o=n("PPkd"),c=n("IUx0"),u=n("s9UB"),h=n("LuVv"),l=n("fGh/"),p=n("sWB5"),y=n("eOWL").f,f=n("NlCR")(0),x=n("lBnu");t.exports=function(t,e,n,d,m,b){var g=s[t],v=g,w=m?"set":"add",E=v&&v.prototype,M={};return x&&"function"==typeof v&&(b||E.forEach&&!a((function(){(new v).entries().next()})))?(v=e((function(e,n){h(e,v,t,"_c"),e._c=new g,void 0!=n&&u(n,m,e[w],e)})),f("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(t){var e="add"==t||"set"==t;t in E&&(!b||"clear"!=t)&&o(v.prototype,t,(function(n,s){if(h(this,v,t),!e&&b&&!l(n))return"get"==t&&void 0;var r=this._c[t](0===n?0:n,s);return e?this:r}))})),b||y(v.prototype,"size",{get:function(){return this._c.size}})):(v=d.getConstructor(e,t,m,w),c(v.prototype,n),i.NEED=!0),p(v,t),M[t]=v,r(r.G+r.W+r.F,M),b||d.setStrong(v,t,m),v}},Vlwe:function(t,e,n){n("WwSA"),n("2agv"),t.exports=n("TaGV").Array.from},XmXP:function(t,e,n){var s=n("/6KZ");s(s.S,"Object",{create:n("G+Zn")})},Yvct:function(t,e,n){"use strict";var s=n("eOWL").f,r=n("G+Zn"),i=n("IUx0"),a=n("8Xl/"),o=n("LuVv"),c=n("s9UB"),u=n("gMWQ"),h=n("TTxG"),l=n("hXZv"),p=n("lBnu"),y=n("hYpR").fastKey,f=n("O/tV"),x=p?"_s":"size",d=function(t,e){var n,s=y(e);if("F"!==s)return t._i[s];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var h=t((function(t,s){o(t,h,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[x]=0,void 0!=s&&c(s,n,t[u],t)}));return i(h.prototype,{clear:function(){for(var t=f(this,e),n=t._i,s=t._f;s;s=s.n)s.r=!0,s.p&&(s.p=s.p.n=void 0),delete n[s.i];t._f=t._l=void 0,t[x]=0},delete:function(t){var n=f(this,e),s=d(n,t);if(s){var r=s.n,i=s.p;delete n._i[s.i],s.r=!0,i&&(i.n=r),r&&(r.p=i),n._f==s&&(n._f=r),n._l==s&&(n._l=i),n[x]--}return!!s},forEach:function(t){f(this,e);for(var n,s=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(s(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!d(f(this,e),t)}}),p&&s(h.prototype,"size",{get:function(){return f(this,e)[x]}}),h},def:function(t,e,n){var s,r,i=d(t,e);return i?i.v=n:(t._l=i={i:r=y(e,!0),k:e,v:n,p:s=t._l,n:void 0,r:!1},t._f||(t._f=i),s&&(s.n=i),t[x]++,"F"!==r&&(t._i[r]=i)),t},getEntry:d,setStrong:function(t,e,n){u(t,e,(function(t,n){this._t=f(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?h(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,h(1))}),n?"entries":"values",!n,!0),l(e)}}},g2Zv:function(t,e,n){"use strict";var s=n("Sxkx");e.a=function(t){return t&&Object(s.c)(t.x)&&Object(s.c)(t.y)}},hXZv:function(t,e,n){"use strict";var s=n("41F1"),r=n("TaGV"),i=n("eOWL"),a=n("lBnu"),o=n("0Sp3")("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:s[t];a&&e&&!e[o]&&i.f(e,o,{configurable:!0,get:function(){return this}})}},i1F0:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));var s=n("mXGw"),r=Object(s.createContext)({requestBox:function(){console.warn("Regraph: A request was made to BoxContext, but none was provided.")}}),i=function(){return Object(s.useContext)(r)}},iKhv:function(t,e){},lyqB:function(t,e,n){var s=n("s9UB");t.exports=function(t,e){var n=[];return s(t,!1,n.push,n,e),n}},md7T:function(t,e,n){n("6JBb"),t.exports=n("TaGV").Object.values},"n+1H":function(t,e,n){n("+9rI")("Map")},oICS:function(t,e,n){var s=n("ADe/");t.exports=function(t,e,n,r){try{return r?e(s(n)[0],n[1]):e(n)}catch(a){var i=t.return;throw void 0!==i&&s(i.call(t)),a}}},pFlO:function(t,e,n){"use strict";var s=n("/6KZ");t.exports=function(t){s(s.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},pL2a:function(t,e,n){t.exports=n("AXMb")},s9UB:function(t,e,n){var s=n("8Xl/"),r=n("oICS"),i=n("Ng5M"),a=n("ADe/"),o=n("gou2"),c=n("VJcA"),u={},h={};(e=t.exports=function(t,e,n,l,p){var y,f,x,d,m=p?function(){return t}:c(t),b=s(n,l,e?2:1),g=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(i(m)){for(y=o(t.length);y>g;g++)if((d=e?b(a(f=t[g])[0],f[1]):b(t[g]))===u||d===h)return d}else for(x=m.call(t);!(f=x.next()).done;)if((d=r(x,b,f.value,e))===u||d===h)return d}).BREAK=u,e.RETURN=h},zVA4:function(t,e,n){var s=n("/6KZ");s(s.P+s.R,"Map",{toJSON:n("BGbK")("Map")})}}]);