import 'prismjs/themes/prism-solarizedlight.css';
import Graph from 'docs/src/getting-started/Minimal';

# Graph Properties

<Graph />

```jsx
import React from 'react';
import { Graph } from '@regraph/graph';
import { Line } from '@regraph/connections';

export default () => (
  <Graph
    width={220}
    height={100}
    nodes={[{ id: 'ping' }, { id: 'pong' }]}
    boxes={{
      ping: { x: 50, y: 40, width: 20, height: 20 },
      pong: { x: 150, y: 40, width: 20, height: 20 },
    }}
    renderSvgNode={({ id, box }) => <rect key={id} {...box} fill="Chocolate" />}
    connections={[
      {
        id: 'ping->pong',
        src: { x: 60, y: 50 },
        dst: { x: 160, y: 50 },
      },
    ]}
    renderConnection={props => <Line key={props.id} {...props} />}
  />
);
```

## width & height

Define the size of the graph.

> 🐞 The `width` and `height` properties ensure correct rendering, scroll behaviour and SVG exports.

**Related**

- withViewportSize

## nodes

An array containing node objects.

> 🐞 Each node must have an `id` property.

## boxes

A dictionary (ie, object), with the element `id` as key and its bounding rectangle as value.

> Boxes are pivotal for many graphical tasks like:
>
> - Positioning
> - Layouting
> - Hit detection

## renderSvgNode & renderHtmlNode

[Render props](https://reactjs.org/docs/render-props.html) for SVG or HTML nodes.

## connections

An array of object, each has an `id` property and both the source and destination points.

> 💡 To use node IDs as the connection source/destination, see `withLayout` below.

> 🐞 A connection must have an `id` property.

**Related**

- withLayout

## renderConnection

[Render prop](https://reactjs.org/docs/render-props.html) for connections.

# Higher-Order Components

## withViewportSize

Automatically calculates the width and height of the graph based on the `boxes` property.

**Options**

- `padding`
  - an object with the `right` and `bottom` padding
  - a function that takes the calulated viewport box and return `right` and `bottom` padding.

In the following example, we use the `x` and `y` values of the viewport as the `right` and `bottom` padding, so the graph have equal padding on each axis.

```jsx
const MyGraph = withViewportSize({
  padding: ({ x, y }) => ({ right: x, bottom: y }),
})(Graph);

export default () => (
  <MyGraph
    nodes={[{ id: 'ping' }, { id: 'pong' }]}
    boxes={{
      ping: { x: 50, y: 40, width: 20, height: 20 },
      pong: { x: 150, y: 40, width: 20, height: 20 },
    }}
    renderSvgNode={({ id, box }) => <rect key={id} {...box} fill="Chocolate" />}
  />
);
```

## withLayout

Applies the provided layout to the graph.

A layout is a function that takes graph properties (boxes, connections, etc.) and returns modified graph properties.

### connectionLayout

Very often node IDs are used as the connection's source and destination:

```jsx
const connections={[{ id: 'ping->pong', src: 'ping', dst: 'pong' }]}
```

The `connectionLayout` use the `boxes` to transform those IDs to points:

```jsx
import React from 'react';
import {
  Graph,
  compose,
  withViewportSize,
  withLayout,
  connectionLayout,
} from '@regraph/graph';
import { Line } from '@regraph/connections';

const MyGraph = compose(
  withLayout(connectionLayout()),
  withViewportSize({ padding: ({ x, y }) => ({ right: x, bottom: y }) })
)(Graph);

export default () => (
  <MyGraph
    nodes={[{ id: 'ping' }, { id: 'pong' }]}
    boxes={{
      ping: { x: 50, y: 40, width: 20, height: 20 },
      pong: { x: 150, y: 40, width: 20, height: 20 },
    }}
    renderSvgNode={({ id, box }) => <rect key={id} {...box} fill="Chocolate" />}
    connections={[
      {
        id: 'ping->pong',
        src: 'ping',
        dst: 'pong',
      },
    ]}
    renderConnection={props => <Line key={props.id} {...props} />}
  />
);
```
